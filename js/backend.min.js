function makeFromDroppable(a){var b=a(".c37-step-container");b.droppable({accept:".c37-form-multi-element",activeClass:"active-zone",hoverClass:"drop-zone",drop:function(b,c){if("false"!=c.draggable.attr("data-original")){var d=c.draggable.attr("data-c37-type"),e=Templates[d],f=new e;f.render(),c.draggable.html(f.$el);var g="c37-step-id-"+Math.floor(1e4*Math.random());c.draggable.attr("id",g),c.draggable.attr("data-original","false"),makeC37StepDroppable(a),makeC37BoxDroppable(a)}}})}function makeC37BoxDroppable(a){var b=a(".c37-box");b.sortable({revert:!0,connectWith:[".c37-box"],handle:".cm-move",beforeStop:function(a,b){if("false"!=b.item.attr("data-original")){var c=b.item.attr("data-c37-type"),d=Templates[c],e=new d;e.render(),b.item.html(e.$el);var f="c37_id_"+Math.floor(1e4*Math.random());b.item.attr("id",f),b.item.attr("data-original","false"),b.item.removeAttr("style")}},stop:function(a,b){b.item.css("width",""),b.item.css("height","")},out:function(b,c){a(c.sender).removeClass("box-hover-zone")}}),b.droppable({accept:".c37-item-element",activeClass:"box-active-zone",hoverClass:"box-hover-zone",out:function(){console.log(a(this))}})}function makeC37StepDroppable(a){var b=a(".c37-step");b.sortable({revert:!0,handle:".cm-row-move",connectWith:[".c37-step"],stop:function(a,b){b.item.css("width",""),b.item.css("height","")},receive:function(a,b){}}),b.droppable({accept:".c37-container-element",activeClass:"row-active-zone",hoverClass:"row-drop-zone",greedy:!0,drop:function(b,c){if("false"!=c.draggable.attr("data-original")){var d=c.draggable.attr("data-c37-type"),e=Templates[d],f=new e;f.render(),c.draggable.html(f.$el),c.draggable.attr("id","c37_id_"+Math.floor(1e3*Math.random())),c.draggable.attr("data-original","false"),makeC37BoxDroppable(a)}}})}function rgb2hex(a){return a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),a&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""}function resetFormSettings(){core37Form={formID:0,formName:"",formContent:{},formSettings:{action:"",method:"",cssID:"",afterSubmitURL:"",sendEmail:!1,sendAutoReply:!1}}}function getTextColor(a){var b=a.get("editingElementID");return"undefined"==typeof elementsStyles[b]||"undefined"==typeof elementsStyles[b].color?(console.log("no txt color"),"#000000"):elementsStyles[b].color}function getBackgroundColor(a){var b=a.get("editingElementID");return console.log(b),"undefined"==typeof elementsStyles[b]||"undefined"==typeof elementsStyles[b]["background-color"]?(console.log("no bg color"),"#ffffff"):elementsStyles[b]["background-color"]}function restoreStarsRating(a){a(function(){_.each(a(".c37-form .c37-star-rating"),function(b){var c=a(b);c.siblings(".br-widget").remove(),console.log(c.find(".br-wrapper").length),console.log("star rendered");var d=c.attr("data-theme"),e="true"==c.attr("data-show-selected"),f="true"==c.attr("data-show-values"),g=c.attr("data-initial-rating"),h=c.attr("id"),i={theme:d,showSelectedRating:e,showValues:f,initialRating:g,allowEmpty:!0};console.log(i),a("#"+h).barrating(i)})})}function renderFontAwesome(a){var b=["fa-fort-awesome","fa-font-awesome","fa-bars","fa-caret-down","fa-flag","fa-wheelchair-alt","fa-camera-retro","fa-universal-access","fa-hand-spock-o","fa-ship","fa-venus","fa-file-image-o","fa-spinner","fa-check-square","fa-credit-card","fa-pie-chart","fa-won","fa-file-text-o","fa-arrow-right","fa-play-circle","fa-facebook-official","fa-medkit","fa-shopping-cart","fa-envelope","fa-search","fa-american-sign-language-interpreting","fa-asl-interpreting","fa-assistive-listening-systems","fa-audio-description","fa-blind","fa-braille","fa-deaf","fa-deafness","fa-envira","fa-fa","fa-first-order","fa-gitlab","fa-glide","fa-glide-g","fa-google-plus-circle","fa-google-plus-official","fa-hard-of-hearing","fa-instagram","fa-low-vision","fa-pied-piper","fa-question-circle-o","fa-sign-language","fa-signing","fa-snapchat","fa-snapchat-ghost","fa-snapchat-square","fa-themeisle","fa-viadeo","fa-viadeo-square","fa-volume-control-phone","fa-wpbeginner","fa-wpforms","fa-yoast","fa-adjust","fa-anchor","fa-archive","fa-area-chart","fa-arrows","fa-arrows-h","fa-arrows-v","fa-asterisk","fa-at","fa-automobile","fa-balance-scale","fa-ban","fa-bank","fa-bar-chart","fa-bar-chart-o","fa-barcode","fa-battery-0","fa-battery-1","fa-battery-2","fa-battery-3","fa-battery-4","fa-battery-empty","fa-battery-full","fa-battery-half","fa-battery-quarter","fa-battery-three-quarters","fa-bed","fa-beer","fa-bell","fa-bell-o","fa-bell-slash","fa-bell-slash-o","fa-bicycle","fa-binoculars","fa-birthday-cake","fa-bluetooth","fa-bluetooth-b","fa-bolt","fa-bomb","fa-book","fa-bookmark","fa-bookmark-o","fa-briefcase","fa-bug","fa-building","fa-building-o","fa-bullhorn","fa-bullseye","fa-bus","fa-cab","fa-calculator","fa-calendar","fa-calendar-check-o","fa-calendar-minus-o","fa-calendar-o","fa-calendar-plus-o","fa-calendar-times-o","fa-camera","fa-car","fa-caret-square-o-down","fa-caret-square-o-left","fa-caret-square-o-right","fa-caret-square-o-up","fa-cart-arrow-down","fa-cart-plus","fa-cc","fa-certificate","fa-check","fa-check-circle","fa-check-circle-o","fa-check-square-o","fa-child","fa-circle","fa-circle-o","fa-circle-o-notch","fa-circle-thin","fa-clock-o","fa-clone","fa-close","fa-cloud","fa-cloud-download","fa-cloud-upload","fa-code","fa-code-fork","fa-coffee","fa-cog","fa-cogs","fa-comment","fa-comment-o","fa-commenting","fa-commenting-o","fa-comments","fa-comments-o","fa-compass","fa-copyright","fa-creative-commons","fa-credit-card-alt","fa-crop","fa-crosshairs","fa-cube","fa-cubes","fa-cutlery","fa-dashboard","fa-database","fa-desktop","fa-diamond","fa-dot-circle-o","fa-download","fa-edit","fa-ellipsis-h","fa-ellipsis-v","fa-envelope-o","fa-envelope-square","fa-eraser","fa-exchange","fa-exclamation","fa-exclamation-circle","fa-exclamation-triangle","fa-external-link","fa-external-link-square","fa-eye","fa-eye-slash","fa-eyedropper","fa-fax","fa-feed","fa-female","fa-fighter-jet","fa-file-archive-o","fa-file-audio-o","fa-file-code-o","fa-file-excel-o","fa-file-movie-o","fa-file-pdf-o","fa-file-photo-o","fa-file-picture-o","fa-file-powerpoint-o","fa-file-sound-o","fa-file-video-o","fa-file-word-o","fa-file-zip-o","fa-film","fa-filter","fa-fire","fa-fire-extinguisher","fa-flag-checkered","fa-flag-o","fa-flash","fa-flask","fa-folder","fa-folder-o","fa-folder-open","fa-folder-open-o","fa-frown-o","fa-futbol-o","fa-gamepad","fa-gavel","fa-gear","fa-gears","fa-gift","fa-glass","fa-globe","fa-graduation-cap","fa-group","fa-hand-grab-o","fa-hand-lizard-o","fa-hand-paper-o","fa-hand-peace-o","fa-hand-pointer-o","fa-hand-rock-o","fa-hand-scissors-o","fa-hand-stop-o","fa-hashtag","fa-hdd-o","fa-headphones","fa-heart","fa-heart-o","fa-heartbeat","fa-history","fa-home","fa-hotel","fa-hourglass","fa-hourglass-1","fa-hourglass-2","fa-hourglass-3","fa-hourglass-end","fa-hourglass-half","fa-hourglass-o","fa-hourglass-start","fa-i-cursor","fa-image","fa-inbox","fa-industry","fa-info","fa-info-circle","fa-institution","fa-key","fa-keyboard-o","fa-language","fa-laptop","fa-leaf","fa-legal","fa-lemon-o","fa-level-down","fa-level-up","fa-life-bouy","fa-life-buoy","fa-life-ring","fa-life-saver","fa-lightbulb-o","fa-line-chart","fa-location-arrow","fa-lock","fa-magic","fa-magnet","fa-mail-forward","fa-mail-reply","fa-mail-reply-all","fa-male","fa-map","fa-map-marker","fa-map-o","fa-map-pin","fa-map-signs","fa-meh-o","fa-microphone","fa-microphone-slash","fa-minus","fa-minus-circle","fa-minus-square","fa-minus-square-o","fa-mobile","fa-mobile-phone","fa-money","fa-moon-o","fa-mortar-board","fa-motorcycle","fa-mouse-pointer","fa-music","fa-navicon","fa-newspaper-o","fa-object-group","fa-object-ungroup","fa-paint-brush","fa-paper-plane","fa-paper-plane-o","fa-paw","fa-pencil","fa-pencil-square","fa-pencil-square-o","fa-percent","fa-phone","fa-phone-square","fa-photo","fa-picture-o","fa-plane","fa-plug","fa-plus","fa-plus-circle","fa-plus-square","fa-plus-square-o","fa-power-off","fa-print","fa-puzzle-piece","fa-qrcode","fa-question","fa-question-circle","fa-quote-left","fa-quote-right","fa-random","fa-recycle","fa-refresh","fa-registered","fa-remove","fa-reorder","fa-reply","fa-reply-all","fa-retweet","fa-road","fa-rocket","fa-rss","fa-rss-square","fa-search-minus","fa-search-plus","fa-send","fa-send-o","fa-server","fa-share","fa-share-alt","fa-share-alt-square","fa-share-square","fa-share-square-o","fa-shield","fa-shopping-bag","fa-shopping-basket","fa-sign-in","fa-sign-out","fa-signal","fa-sitemap","fa-sliders","fa-smile-o","fa-soccer-ball-o","fa-sort","fa-sort-alpha-asc","fa-sort-alpha-desc","fa-sort-amount-asc","fa-sort-amount-desc","fa-sort-asc","fa-sort-desc","fa-sort-down","fa-sort-numeric-asc","fa-sort-numeric-desc","fa-sort-up","fa-space-shuttle","fa-spoon","fa-square","fa-square-o","fa-star","fa-star-half","fa-star-half-empty","fa-star-half-full","fa-star-half-o","fa-star-o","fa-sticky-note","fa-sticky-note-o","fa-street-view","fa-suitcase","fa-sun-o","fa-support","fa-tablet","fa-tachometer","fa-tag","fa-tags","fa-tasks","fa-taxi","fa-television","fa-terminal","fa-thumb-tack","fa-thumbs-down","fa-thumbs-o-down","fa-thumbs-o-up","fa-thumbs-up","fa-ticket","fa-times","fa-times-circle","fa-times-circle-o","fa-tint","fa-toggle-down","fa-toggle-left","fa-toggle-off","fa-toggle-on","fa-toggle-right","fa-toggle-up","fa-trademark","fa-trash","fa-trash-o","fa-tree","fa-trophy","fa-truck","fa-tty","fa-tv","fa-umbrella","fa-university","fa-unlock","fa-unlock-alt","fa-unsorted","fa-upload","fa-user","fa-user-plus","fa-user-secret","fa-user-times","fa-users","fa-video-camera","fa-volume-down","fa-volume-off","fa-volume-up","fa-warning","fa-wheelchair","fa-wifi","fa-wrench","fa-hand-o-down","fa-hand-o-left","fa-hand-o-right","fa-hand-o-up","fa-ambulance","fa-subway","fa-train","fa-genderless","fa-intersex","fa-mars","fa-mars-double","fa-mars-stroke","fa-mars-stroke-h","fa-mars-stroke-v","fa-mercury","fa-neuter","fa-transgender","fa-transgender-alt","fa-venus-double","fa-venus-mars","fa-file","fa-file-o","fa-file-text","fa-cc-amex","fa-cc-diners-club","fa-cc-discover","fa-cc-jcb","fa-cc-mastercard","fa-cc-paypal","fa-cc-stripe","fa-cc-visa","fa-google-wallet","fa-paypal","fa-bitcoin","fa-btc","fa-cny","fa-dollar","fa-eur","fa-euro","fa-gbp","fa-gg","fa-gg-circle","fa-ils","fa-inr","fa-jpy","fa-krw","fa-rmb","fa-rouble","fa-rub","fa-ruble","fa-rupee","fa-shekel","fa-sheqel","fa-try","fa-turkish-lira","fa-usd","fa-yen","fa-align-center","fa-align-justify","fa-align-left","fa-align-right","fa-bold","fa-chain","fa-chain-broken","fa-clipboard","fa-columns","fa-copy","fa-cut","fa-dedent","fa-files-o","fa-floppy-o","fa-font","fa-header","fa-indent","fa-italic","fa-link","fa-list","fa-list-alt","fa-list-ol","fa-list-ul","fa-outdent","fa-paperclip","fa-paragraph","fa-paste","fa-repeat","fa-rotate-left","fa-rotate-right","fa-save","fa-scissors","fa-strikethrough","fa-subscript","fa-superscript","fa-table","fa-text-height","fa-text-width","fa-th","fa-th-large","fa-th-list","fa-underline","fa-undo","fa-unlink","fa-angle-double-down","fa-angle-double-left","fa-angle-double-right","fa-angle-double-up","fa-angle-down","fa-angle-left","fa-angle-right","fa-angle-up","fa-arrow-circle-down","fa-arrow-circle-left","fa-arrow-circle-o-down","fa-arrow-circle-o-left","fa-arrow-circle-o-right","fa-arrow-circle-o-up","fa-arrow-circle-right","fa-arrow-circle-up","fa-arrow-down","fa-arrow-left","fa-arrow-up","fa-arrows-alt","fa-caret-left","fa-caret-right","fa-caret-up","fa-chevron-circle-down","fa-chevron-circle-left","fa-chevron-circle-right","fa-chevron-circle-up","fa-chevron-down","fa-chevron-left","fa-chevron-right","fa-chevron-up","fa-long-arrow-down","fa-long-arrow-left","fa-long-arrow-right","fa-long-arrow-up","fa-backward","fa-compress","fa-eject","fa-expand","fa-fast-backward","fa-fast-forward","fa-forward","fa-pause","fa-pause-circle","fa-pause-circle-o","fa-play","fa-play-circle-o","fa-step-backward","fa-step-forward","fa-stop","fa-stop-circle","fa-stop-circle-o","fa-youtube-play","fa-500px","fa-adn","fa-amazon","fa-android","fa-angellist","fa-apple","fa-behance","fa-behance-square","fa-bitbucket","fa-bitbucket-square","fa-black-tie","fa-buysellads","fa-chrome","fa-codepen","fa-codiepie","fa-connectdevelop","fa-contao","fa-css3","fa-dashcube","fa-delicious","fa-deviantart","fa-digg","fa-dribbble","fa-dropbox","fa-drupal","fa-edge","fa-empire","fa-expeditedssl","fa-facebook","fa-facebook-f","fa-facebook-square","fa-firefox","fa-flickr","fa-fonticons","fa-forumbee","fa-foursquare","fa-ge","fa-get-pocket","fa-git","fa-git-square","fa-github","fa-github-alt","fa-github-square","fa-gittip","fa-google","fa-google-plus","fa-google-plus-square","fa-gratipay","fa-hacker-news","fa-houzz","fa-html5","fa-internet-explorer","fa-ioxhost","fa-joomla","fa-jsfiddle","fa-lastfm","fa-lastfm-square","fa-leanpub","fa-linkedin","fa-linkedin-square","fa-linux","fa-maxcdn","fa-meanpath","fa-medium","fa-mixcloud","fa-modx","fa-odnoklassniki","fa-odnoklassniki-square","fa-opencart","fa-openid","fa-opera","fa-optin-monster","fa-pagelines","fa-pied-piper-alt","fa-pied-piper-pp","fa-pinterest","fa-pinterest-p","fa-pinterest-square","fa-product-hunt","fa-qq","fa-ra","fa-rebel","fa-reddit","fa-reddit-alien","fa-reddit-square","fa-renren","fa-resistance","fa-safari","fa-scribd","fa-sellsy","fa-shirtsinbulk","fa-simplybuilt","fa-skyatlas","fa-skype","fa-slack","fa-slideshare","fa-soundcloud","fa-spotify","fa-stack-exchange","fa-stack-overflow","fa-steam","fa-steam-square","fa-stumbleupon","fa-stumbleupon-circle","fa-tencent-weibo","fa-trello","fa-tripadvisor","fa-tumblr","fa-tumblr-square","fa-twitch","fa-twitter","fa-twitter-square","fa-usb","fa-viacoin","fa-vimeo","fa-vimeo-square","fa-vine","fa-vk","fa-wechat","fa-weibo","fa-weixin","fa-whatsapp","fa-wikipedia-w","fa-windows","fa-wordpress","fa-xing","fa-xing-square","fa-y-combinator","fa-y-combinator-square","fa-yahoo","fa-yc","fa-yc-square","fa-yelp","fa-youtube","fa-youtube-square","fa-h-square","fa-hospital-o","fa-stethoscope","fa-user-md"];jQuery("[data-for=icon]").autocomplete({source:b,html:!0,select:function(a,b){jQuery(this).siblings("i").first().attr("class","fa "+b.item.value)}}).data("ui-autocomplete")._renderItem=function(a,b){var c='<li><i class="fa '+b.value+'"></i> '+b.value+"</li>";return jQuery(c).appendTo(a)}}function hideOptionsWindow(a){a("#options-window").hide()}function showOptionsWindow(a){a("#options-window").show()}function getEditForm(a){var b=Forms[a],c=[];""!=b.general&&c.push({tab:'<li><a class="active-tab" href="#general-tab">General</a></li>',tabContent:'<div id="general-tab">'+b.general+"</div>"}),""!=b.advanced&&c.push({tab:'<li><a href="#advanced-tab">Advanced</a></li>',tabContent:'<div id="advanced-tab">'+b.advanced+"</div>"}),""!=b.style&&c.push({tab:'<li><a href="#style-tab">Styles</a></li>',tabContent:'<% var styles = elementsStyles[this.model.get(\'editingElementID\')]; if (typeof styles == "undefined") { styles = {}; } %><div id="style-tab">'+b.style+"</div>"}),""!=b.action&&c.push({tab:'<li><a href="#action-tab">Action</a></li>',tabContent:'<div id="action-tab">'+b.action+"</div>"});var d="",e="",f=100/c.length;return _.each(c,function(a){d+=a.tab.replace("<li>",'<li style="width: '+f+'%;">'),e+=a.tabContent}),'<div class="'+b.parentClass+'" id="setting-tabs"><div id="settings-micro-panel"><span class="close-panel"><i class="fa fa-close"></i> </span><span id="move-panel"><i class="fa fa-arrows"></i> </span></div><ul>'+d+"</ul>"+e+'</div><div class="clear"></div>'}function removeElement(){console.log("start removing"),this.editingElement().remove(),jQuery("#element-settings").html("")}function removeSizeClass(a){return a.attr("class",function(a,b){return b.replace(/(^|\s)c37-col-md\S+/g,"")}),a}function renderCSS(){var a=this.model.get("editingElementID"),b=this.$el.find("[data-for=text-color] input").first().val(),c=this.$el.find("[data-for=background-color] input").first().val();"undefined"==typeof elementsStyles[a]&&(elementsStyles[a]={}),elementsStyles[a]["background-color"]=c,elementsStyles[a].color=b,applyCSS()}function applyCSS(){var a="";for(var b in elementsStyles){var c=elementsStyles[b],d="";for(var e in c)d+=e+":"+c[e]+";";a+="#"+core37Form.formSettings.cssID+" #"+b+" .c37-child{"+d+"}"}0==jQuery("#element-styles").length&&jQuery("head").append('<style id="element-styles"></style>'),jQuery("#element-styles").text(""),jQuery("#element-styles").text(a)}!function(a){a(["jquery"],function(a){return function(){function b(a,b,c){return o({type:v.error,iconClass:p().iconClasses.error,message:a,optionsOverride:c,title:b})}function c(b,c){return b||(b=p()),r=a("#"+b.containerId),r.length?r:(c&&(r=l(b)),r)}function d(a,b,c){return o({type:v.info,iconClass:p().iconClasses.info,message:a,optionsOverride:c,title:b})}function e(a){s=a}function f(a,b,c){return o({type:v.success,iconClass:p().iconClasses.success,message:a,optionsOverride:c,title:b})}function g(a,b,c){return o({type:v.warning,iconClass:p().iconClasses.warning,message:a,optionsOverride:c,title:b})}function h(a,b){var d=p();r||c(d),k(a,d,b)||j(d)}function i(b){var d=p();return r||c(d),b&&0===a(":focus",b).length?void q(b):void(r.children().length&&r.remove())}function j(b){for(var c=r.children(),d=c.length-1;d>=0;d--)k(a(c[d]),b)}function k(b,c,d){var e=!(!d||!d.force)&&d.force;return!(!b||!e&&0!==a(":focus",b).length||(b[c.hideMethod]({duration:c.hideDuration,easing:c.hideEasing,complete:function(){q(b)}}),0))}function l(b){return r=a("<div/>").attr("id",b.containerId).addClass(b.positionClass),r.appendTo(a(b.target)),r}function m(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function n(a){s&&s(a)}function o(b){function d(a){return null==a&&(a=""),a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function e(){i(),k(),l(),m(),o(),s(),j(),f()}function f(){var a="";switch(b.iconClass){case"toast-success":case"toast-info":a="polite";break;default:a="assertive"}D.attr("aria-live",a)}function g(){A.closeOnHover&&D.hover(y,x),!A.onclick&&A.tapToDismiss&&D.click(w),A.closeButton&&H&&H.click(function(a){a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble&&a.cancelBubble!==!0&&(a.cancelBubble=!0),A.onCloseClick&&A.onCloseClick(a),w(!0)}),A.onclick&&D.click(function(a){A.onclick(a),w()})}function h(){D.hide(),D[A.showMethod]({duration:A.showDuration,easing:A.showEasing,complete:A.onShown}),A.timeOut>0&&(C=setTimeout(w,A.timeOut),I.maxHideTime=parseFloat(A.timeOut),I.hideEta=(new Date).getTime()+I.maxHideTime,A.progressBar&&(I.intervalId=setInterval(z,10)))}function i(){b.iconClass&&D.addClass(A.toastClass).addClass(B)}function j(){A.newestOnTop?r.prepend(D):r.append(D)}function k(){if(b.title){var a=b.title;A.escapeHtml&&(a=d(b.title)),E.append(a).addClass(A.titleClass),D.append(E)}}function l(){if(b.message){var a=b.message;A.escapeHtml&&(a=d(b.message)),F.append(a).addClass(A.messageClass),D.append(F)}}function m(){A.closeButton&&(H.addClass(A.closeClass).attr("role","button"),D.prepend(H))}function o(){A.progressBar&&(G.addClass(A.progressClass),D.prepend(G))}function s(){A.rtl&&D.addClass("rtl")}function v(a,b){if(a.preventDuplicates){if(b.message===t)return!0;t=b.message}return!1}function w(b){var c=b&&A.closeMethod!==!1?A.closeMethod:A.hideMethod,d=b&&A.closeDuration!==!1?A.closeDuration:A.hideDuration,e=b&&A.closeEasing!==!1?A.closeEasing:A.hideEasing;if(!a(":focus",D).length||b)return clearTimeout(I.intervalId),D[c]({duration:d,easing:e,complete:function(){q(D),clearTimeout(C),A.onHidden&&"hidden"!==J.state&&A.onHidden(),J.state="hidden",J.endTime=new Date,n(J)}})}function x(){(A.timeOut>0||A.extendedTimeOut>0)&&(C=setTimeout(w,A.extendedTimeOut),I.maxHideTime=parseFloat(A.extendedTimeOut),I.hideEta=(new Date).getTime()+I.maxHideTime)}function y(){clearTimeout(C),I.hideEta=0,D.stop(!0,!0)[A.showMethod]({duration:A.showDuration,easing:A.showEasing})}function z(){var a=(I.hideEta-(new Date).getTime())/I.maxHideTime*100;G.width(a+"%")}var A=p(),B=b.iconClass||A.iconClass;if("undefined"!=typeof b.optionsOverride&&(A=a.extend(A,b.optionsOverride),B=b.optionsOverride.iconClass||B),!v(A,b)){u++,r=c(A,!0);var C=null,D=a("<div/>"),E=a("<div/>"),F=a("<div/>"),G=a("<div/>"),H=a(A.closeHtml),I={intervalId:null,hideEta:null,maxHideTime:null},J={toastId:u,state:"visible",startTime:new Date,options:A,map:b};return e(),h(),g(),n(J),A.debug&&console&&console.log(J),D}}function p(){return a.extend({},m(),w.options)}function q(a){r||(r=c()),a.is(":visible")||(a.remove(),a=null,0===r.children().length&&(r.remove(),t=void 0))}var r,s,t,u=0,v={error:"error",info:"info",success:"success",warning:"warning"},w={clear:h,remove:i,error:b,getContainer:c,info:d,options:{},subscribe:e,success:f,version:"2.1.3",warning:g};return w}()})}("function"==typeof define&&define.amd?define:function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require("jquery")):window.toastr=b(window.jQuery)}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){var b=function(){function b(){var b=this,c=function(){var c=["br-wrapper"];""!==b.options.theme&&c.push("br-theme-"+b.options.theme),b.$elem.wrap(a("<div />",{class:c.join(" ")}))},d=function(){b.$elem.unwrap()},e=function(c){return a.isNumeric(c)&&(c=Math.floor(c)),a('option[value="'+c+'"]',b.$elem)},f=function(){var c=b.options.initialRating;return c?e(c):a("option:selected",b.$elem)},g=function(){var c=b.$elem.find('option[value="'+b.options.emptyValue+'"]');return!c.length&&b.options.allowEmpty?(c=a("<option />",{value:b.options.emptyValue}),c.prependTo(b.$elem)):c},h=function(a){var c=b.$elem.data("barrating");return"undefined"!=typeof a?c[a]:c},i=function(a,c){null!==c&&"object"==typeof c?b.$elem.data("barrating",c):b.$elem.data("barrating")[a]=c},j=function(){var a=f(),c=g(),d=a.val(),e=a.data("html")?a.data("html"):a.text(),h=null!==b.options.allowEmpty?b.options.allowEmpty:!!c.length,j=c.length?c.val():null,k=c.length?c.text():null;i(null,{userOptions:b.options,ratingValue:d,ratingText:e,originalRatingValue:d,originalRatingText:e,allowEmpty:h,emptyRatingValue:j,emptyRatingText:k,readOnly:b.options.readonly,ratingMade:!1})},k=function(){b.$elem.removeData("barrating")},l=function(){return h("ratingText")},m=function(){return h("ratingValue")},n=function(){var c=a("<div />",{class:"br-widget"});return b.$elem.find("option").each(function(){var d,e,f,g;d=a(this).val(),d!==h("emptyRatingValue")&&(e=a(this).text(),f=a(this).data("html"),f&&(e=f),g=a("<a />",{href:"#","data-rating-value":d,"data-rating-text":e,html:b.options.showValues?e:""}),c.append(g))}),b.options.showSelectedRating&&c.append(a("<div />",{text:"",class:"br-current-rating"})),b.options.reverse&&c.addClass("br-reverse"),b.options.readonly&&c.addClass("br-readonly"),c},o=function(){return h("userOptions").reverse?"nextAll":"prevAll"},p=function(a){e(a).prop("selected",!0),b.$elem.change()},q=function(){a("option",b.$elem).prop("selected",function(){return this.defaultSelected}),b.$elem.change()},r=function(a){a=a?a:l(),a==h("emptyRatingText")&&(a=""),b.options.showSelectedRating&&b.$elem.parent().find(".br-current-rating").text(a)},s=function(a){return Math.round(Math.floor(10*a)/10%1*100)},t=function(){b.$widget.find("a").removeClass(function(a,b){return(b.match(/(^|\s)br-\S+/g)||[]).join(" ")})},u=function(){var c,d,e=b.$widget.find('a[data-rating-value="'+m()+'"]'),f=h("userOptions").initialRating,g=a.isNumeric(m())?m():0,i=s(f);if(t(),e.addClass("br-selected br-current")[o()]().addClass("br-selected"),!h("ratingMade")&&a.isNumeric(f)){if(f<=g||!i)return;c=b.$widget.find("a"),d=e.length?e[h("userOptions").reverse?"prev":"next"]():c[h("userOptions").reverse?"last":"first"](),d.addClass("br-fractional"),d.addClass("br-fractional-"+i)}},v=function(a){return!(!h("allowEmpty")||!h("userOptions").deselectable)&&m()==a.attr("data-rating-value")},w=function(c){c.on("click.barrating",function(c){var d,e,f=a(this),g=h("userOptions");return c.preventDefault(),d=f.attr("data-rating-value"),e=f.attr("data-rating-text"),v(f)&&(d=h("emptyRatingValue"),e=h("emptyRatingText")),i("ratingValue",d),i("ratingText",e),i("ratingMade",!0),p(d),r(e),u(),g.onSelect.call(b,m(),l(),c),!1})},x=function(b){b.on("mouseenter.barrating",function(){var b=a(this);t(),b.addClass("br-active")[o()]().addClass("br-active"),r(b.attr("data-rating-text"))})},y=function(a){b.$widget.on("mouseleave.barrating blur.barrating",function(){r(),u()})},z=function(b){b.on("touchstart.barrating",function(b){b.preventDefault(),b.stopPropagation(),a(this).click()})},A=function(a){a.on("click.barrating",function(a){a.preventDefault()})},B=function(a){w(a),b.options.hoverState&&(x(a),y(a))},C=function(a){a.off(".barrating")},D=function(a){var c=b.$widget.find("a");z&&z(c),a?(C(c),A(c)):B(c)};this.show=function(){h()||(c(),j(),b.$widget=n(),b.$widget.insertAfter(b.$elem),u(),r(),D(b.options.readonly),b.$elem.hide())},this.readonly=function(a){"boolean"==typeof a&&h("readOnly")!=a&&(D(a),i("readOnly",a),b.$widget.toggleClass("br-readonly"))},this.set=function(a){var c=h("userOptions");b.$elem.find('option[value="'+a+'"]').val()&&(i("ratingValue",a),i("ratingText",b.$elem.find('option[value="'+a+'"]').text()),i("ratingMade",!0),p(m()),r(l()),u(),c.silent||c.onSelect.call(this,m(),l()))},this.clear=function(){var a=h("userOptions");i("ratingValue",h("originalRatingValue")),i("ratingText",h("originalRatingText")),i("ratingMade",!1),q(),r(l()),u(),a.onClear.call(this,m(),l())},this.destroy=function(){var a=m(),c=l(),e=h("userOptions");C(b.$widget.find("a")),b.$widget.remove(),k(),d(),b.$elem.show(),e.onDestroy.call(this,a,c)}}return b.prototype.init=function(b,c){return this.$elem=a(c),this.options=a.extend({},a.fn.barrating.defaults,b),this.options},b}();a.fn.barrating=function(c,d){return this.each(function(){var e=new b;if(a(this).is("select")||a.error("Sorry, this plugin only works with select fields."),e.hasOwnProperty(c)){if(e.init(d,this),"show"===c)return e.show(d);if(e.$elem.data("barrating"))return e.$widget=a(this).next(".br-widget"),e[c](d)}else{if("object"==typeof c||!c)return d=c,e.init(d,this),e.show();a.error("Method "+c+" does not exist on jQuery.barrating")}})},a.fn.barrating.defaults={theme:"",initialRating:null,allowEmpty:null,emptyValue:"",showValues:!1,showSelectedRating:!0,deselectable:!0,reverse:!1,readonly:!1,fastClicks:!0,hoverState:!0,silent:!1,onSelect:function(a,b,c){},onClear:function(a,b){},onDestroy:function(a,b){}},a.fn.barrating.BarRating=b}),!function(a,b,c){"use strict";!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(d,e,f){var g=function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(f,"__esModule",{value:!0});var h,i,j,k,l=d("./modules/handle-dom"),m=d("./modules/utils"),n=d("./modules/handle-swal-dom"),o=d("./modules/handle-click"),p=d("./modules/handle-key"),q=g(p),r=d("./modules/default-params"),s=g(r),t=d("./modules/set-params"),u=g(t);f.default=j=k=function(){function d(a){var b=e;return b[a]===c?s.default[a]:b[a]}var e=arguments[0];if(l.addClass(b.body,"stop-scrolling"),n.resetInput(),e===c)return m.logStr("SweetAlert expects at least 1 attribute!"),!1;var f=m.extend({},s.default);switch(typeof e){case"string":f.title=e,f.text=arguments[1]||"",f.type=arguments[2]||"";break;case"object":if(e.title===c)return m.logStr('Missing "title" argument!'),!1;f.title=e.title;for(var g in s.default)f[g]=d(g);f.confirmButtonText=f.showCancelButton?"Confirm":s.default.confirmButtonText,f.confirmButtonText=d("confirmButtonText"),f.doneFunction=arguments[1]||null;break;default:return m.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof e),!1}u.default(f),n.fixVerticalPosition(),n.openModal(arguments[1]);for(var j=n.getModal(),p=j.querySelectorAll("button"),r=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],t=function(a){return o.handleButton(a,f,j)},v=0;v<p.length;v++)for(var w=0;w<r.length;w++){var x=r[w];p[v][x]=t}n.getOverlay().onclick=t,h=a.onkeydown;var y=function(a){return q.default(a,f,j)};a.onkeydown=y,a.onfocus=function(){setTimeout(function(){i!==c&&(i.focus(),i=c)},0)},k.enableButtons()},j.setDefaults=k.setDefaults=function(a){if(!a)throw new Error("userParams is required");if("object"!=typeof a)throw new Error("userParams has to be a object");m.extend(s.default,a)},j.close=k.close=function(){var d=n.getModal();l.fadeOut(n.getOverlay(),5),l.fadeOut(d,5),l.removeClass(d,"showSweetAlert"),l.addClass(d,"hideSweetAlert"),l.removeClass(d,"visible");var e=d.querySelector(".sa-icon.sa-success");l.removeClass(e,"animate"),l.removeClass(e.querySelector(".sa-tip"),"animateSuccessTip"),l.removeClass(e.querySelector(".sa-long"),"animateSuccessLong");var f=d.querySelector(".sa-icon.sa-error");l.removeClass(f,"animateErrorIcon"),l.removeClass(f.querySelector(".sa-x-mark"),"animateXMark");var g=d.querySelector(".sa-icon.sa-warning");return l.removeClass(g,"pulseWarning"),l.removeClass(g.querySelector(".sa-body"),"pulseWarningIns"),l.removeClass(g.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var a=d.getAttribute("data-custom-class");l.removeClass(d,a)},300),l.removeClass(b.body,"stop-scrolling"),a.onkeydown=h,a.previousActiveElement&&a.previousActiveElement.focus(),i=c,clearTimeout(d.timeout),!0},j.showInputError=k.showInputError=function(a){var b=n.getModal(),c=b.querySelector(".sa-input-error");l.addClass(c,"show");var d=b.querySelector(".sa-error-container");l.addClass(d,"show"),d.querySelector("p").innerHTML=a,setTimeout(function(){j.enableButtons()},1),b.querySelector("input").focus()},j.resetInputError=k.resetInputError=function(a){if(a&&13===a.keyCode)return!1;var b=n.getModal(),c=b.querySelector(".sa-input-error");l.removeClass(c,"show");var d=b.querySelector(".sa-error-container");l.removeClass(d,"show")},j.disableButtons=k.disableButtons=function(){var a=n.getModal(),b=a.querySelector("button.confirm"),c=a.querySelector("button.cancel");b.disabled=!0,c.disabled=!0},j.enableButtons=k.enableButtons=function(){var a=n.getModal(),b=a.querySelector("button.confirm"),c=a.querySelector("button.cancel");b.disabled=!1,c.disabled=!1},"undefined"!=typeof a?a.sweetAlert=a.swal=j:m.logStr("SweetAlert is a frontend module!"),e.exports=f.default},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0});var d={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,
closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#8CD4F5",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:"",showLoaderOnConfirm:!1};c.default=d,b.exports=c.default},{}],3:[function(b,c,d){Object.defineProperty(d,"__esModule",{value:!0});var e=b("./utils"),f=(b("./handle-swal-dom"),b("./handle-dom")),g=function(b,c,d){function g(a){o&&c.confirmButtonColor&&(n.style.backgroundColor=a)}var j,k,l,m=b||a.event,n=m.target||m.srcElement,o=-1!==n.className.indexOf("confirm"),p=-1!==n.className.indexOf("sweet-overlay"),q=f.hasClass(d,"visible"),r=c.doneFunction&&"true"===d.getAttribute("data-has-done-function");switch(o&&c.confirmButtonColor&&(j=c.confirmButtonColor,k=e.colorLuminance(j,-.04),l=e.colorLuminance(j,-.14)),m.type){case"mouseover":g(k);break;case"mouseout":g(j);break;case"mousedown":g(l);break;case"mouseup":g(k);break;case"focus":var s=d.querySelector("button.confirm"),t=d.querySelector("button.cancel");o?t.style.boxShadow="none":s.style.boxShadow="none";break;case"click":var u=d===n,v=f.isDescendant(d,n);if(!u&&!v&&q&&!c.allowOutsideClick)break;o&&r&&q?h(d,c):r&&q||p?i(d,c):f.isDescendant(d,n)&&"BUTTON"===n.tagName&&sweetAlert.close()}},h=function(a,b){var c=!0;f.hasClass(a,"show-input")&&(c=a.querySelector("input").value,c||(c="")),b.doneFunction(c),b.closeOnConfirm&&sweetAlert.close(),b.showLoaderOnConfirm&&sweetAlert.disableButtons()},i=function(a,b){var c=String(b.doneFunction).replace(/\s/g,""),d="function("===c.substring(0,9)&&")"!==c.substring(9,10);d&&b.doneFunction(!1),b.closeOnCancel&&sweetAlert.close()};d.default={handleButton:g,handleConfirm:h,handleCancel:i},c.exports=d.default},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(c,d,e){Object.defineProperty(e,"__esModule",{value:!0});var f=function(a,b){return new RegExp(" "+b+" ").test(" "+a.className+" ")},g=function(a,b){f(a,b)||(a.className+=" "+b)},h=function(a,b){var c=" "+a.className.replace(/[\t\r\n]/g," ")+" ";if(f(a,b)){for(;c.indexOf(" "+b+" ")>=0;)c=c.replace(" "+b+" "," ");a.className=c.replace(/^\s+|\s+$/g,"")}},i=function(a){var c=b.createElement("div");return c.appendChild(b.createTextNode(a)),c.innerHTML},j=function(a){a.style.opacity="",a.style.display="block"},k=function(a){if(a&&!a.length)return j(a);for(var b=0;b<a.length;++b)j(a[b])},l=function(a){a.style.opacity="",a.style.display="none"},m=function(a){if(a&&!a.length)return l(a);for(var b=0;b<a.length;++b)l(a[b])},n=function(a,b){for(var c=b.parentNode;null!==c;){if(c===a)return!0;c=c.parentNode}return!1},o=function(a){a.style.left="-9999px",a.style.display="block";var b,c=a.clientHeight;return b="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(a).getPropertyValue("padding-top"),10):parseInt(a.currentStyle.padding),a.style.left="",a.style.display="none","-"+parseInt((c+b)/2)+"px"},p=function(a,b){if(+a.style.opacity<1){b=b||16,a.style.opacity=0,a.style.display="block";var c=+new Date,d=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){a.style.opacity=+a.style.opacity+(new Date-c)/100,c=+new Date,+a.style.opacity<1&&setTimeout(d,b)});d()}a.style.display="block"},q=function(a,b){b=b||16,a.style.opacity=1;var c=+new Date,d=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){a.style.opacity=+a.style.opacity-(new Date-c)/100,c=+new Date,+a.style.opacity>0?setTimeout(d,b):a.style.display="none"});d()},r=function(c){if("function"==typeof MouseEvent){var d=new MouseEvent("click",{view:a,bubbles:!1,cancelable:!0});c.dispatchEvent(d)}else if(b.createEvent){var e=b.createEvent("MouseEvents");e.initEvent("click",!1,!1),c.dispatchEvent(e)}else b.createEventObject?c.fireEvent("onclick"):"function"==typeof c.onclick&&c.onclick()},s=function(b){"function"==typeof b.stopPropagation?(b.stopPropagation(),b.preventDefault()):a.event&&a.event.hasOwnProperty("cancelBubble")&&(a.event.cancelBubble=!0)};e.hasClass=f,e.addClass=g,e.removeClass=h,e.escapeHtml=i,e._show=j,e.show=k,e._hide=l,e.hide=m,e.isDescendant=n,e.getTopMargin=o,e.fadeIn=p,e.fadeOut=q,e.fireClick=r,e.stopEventPropagation=s},{}],5:[function(b,d,e){Object.defineProperty(e,"__esModule",{value:!0});var f=b("./handle-dom"),g=b("./handle-swal-dom"),h=function(b,d,e){var h=b||a.event,i=h.keyCode||h.which,j=e.querySelector("button.confirm"),k=e.querySelector("button.cancel"),l=e.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(i)){for(var m=h.target||h.srcElement,n=-1,o=0;o<l.length;o++)if(m===l[o]){n=o;break}9===i?(m=-1===n?j:n===l.length-1?l[0]:l[n+1],f.stopEventPropagation(h),m.focus(),d.confirmButtonColor&&g.setFocusStyle(m,d.confirmButtonColor)):13===i?("INPUT"===m.tagName&&(m=j,j.focus()),m=-1===n?j:c):27===i&&d.allowEscapeKey===!0?(m=k,f.fireClick(m,h)):m=c}};e.default=h,d.exports=e.default},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(c,d,e){var f=function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var g=c("./utils"),h=c("./handle-dom"),i=c("./default-params"),j=f(i),k=c("./injected-html"),l=f(k),m=".sweet-alert",n=".sweet-overlay",o=function(){var a=b.createElement("div");for(a.innerHTML=l.default;a.firstChild;)b.body.appendChild(a.firstChild)},p=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){var a=b.querySelector(m);return a||(o(),a=p()),a}),q=function(){var a=p();return a?a.querySelector("input"):void 0},r=function(){return b.querySelector(n)},s=function(a,b){var c=g.hexToRgb(b);a.style.boxShadow="0 0 2px rgba("+c+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},t=function(c){var d=p();h.fadeIn(r(),10),h.show(d),h.addClass(d,"showSweetAlert"),h.removeClass(d,"hideSweetAlert"),a.previousActiveElement=b.activeElement;var e=d.querySelector("button.confirm");e.focus(),setTimeout(function(){h.addClass(d,"visible")},500);var f=d.getAttribute("data-timer");if("null"!==f&&""!==f){var g=c;d.timeout=setTimeout(function(){var a=(g||null)&&"true"===d.getAttribute("data-has-done-function");a?g(null):sweetAlert.close()},f)}},u=function(){var a=p(),b=q();h.removeClass(a,"show-input"),b.value=j.default.inputValue,b.setAttribute("type",j.default.inputType),b.setAttribute("placeholder",j.default.inputPlaceholder),v()},v=function(a){if(a&&13===a.keyCode)return!1;var b=p(),c=b.querySelector(".sa-input-error");h.removeClass(c,"show");var d=b.querySelector(".sa-error-container");h.removeClass(d,"show")},w=function(){var a=p();a.style.marginTop=h.getTopMargin(p())};e.sweetAlertInitialize=o,e.getModal=p,e.getOverlay=r,e.getInput=q,e.setFocusStyle=s,e.openModal=t,e.resetInput=u,e.resetInputError=v,e.fixVerticalPosition=w},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0});var d='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <div class="sa-confirm-button-container">\n        <button class="confirm" tabIndex="1">OK</button><div class="la-ball-fall">\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div></div>';c.default=d,b.exports=c.default},{}],8:[function(a,b,d){Object.defineProperty(d,"__esModule",{value:!0});var e=a("./utils"),f=a("./handle-swal-dom"),g=a("./handle-dom"),h=["error","warning","info","success","input","prompt"],i=function(a){var b=f.getModal(),d=b.querySelector("h2"),i=b.querySelector("p"),j=b.querySelector("button.cancel"),k=b.querySelector("button.confirm");if(d.innerHTML=a.html?a.title:g.escapeHtml(a.title).split("\n").join("<br>"),i.innerHTML=a.html?a.text:g.escapeHtml(a.text||"").split("\n").join("<br>"),a.text&&g.show(i),a.customClass)g.addClass(b,a.customClass),b.setAttribute("data-custom-class",a.customClass);else{var l=b.getAttribute("data-custom-class");g.removeClass(b,l),b.setAttribute("data-custom-class","")}if(g.hide(b.querySelectorAll(".sa-icon")),a.type&&!e.isIE8()){var m=function(){for(var d=!1,e=0;e<h.length;e++)if(a.type===h[e]){d=!0;break}if(!d)return logStr("Unknown alert type: "+a.type),{v:!1};var i=["success","error","warning","info"],j=c;-1!==i.indexOf(a.type)&&(j=b.querySelector(".sa-icon.sa-"+a.type),g.show(j));var k=f.getInput();switch(a.type){case"success":g.addClass(j,"animate"),g.addClass(j.querySelector(".sa-tip"),"animateSuccessTip"),g.addClass(j.querySelector(".sa-long"),"animateSuccessLong");break;case"error":g.addClass(j,"animateErrorIcon"),g.addClass(j.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":g.addClass(j,"pulseWarning"),g.addClass(j.querySelector(".sa-body"),"pulseWarningIns"),g.addClass(j.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":k.setAttribute("type",a.inputType),k.value=a.inputValue,k.setAttribute("placeholder",a.inputPlaceholder),g.addClass(b,"show-input"),setTimeout(function(){k.focus(),k.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof m)return m.v}if(a.imageUrl){var n=b.querySelector(".sa-icon.sa-custom");n.style.backgroundImage="url("+a.imageUrl+")",g.show(n);var o=80,p=80;if(a.imageSize){var q=a.imageSize.toString().split("x"),r=q[0],s=q[1];r&&s?(o=r,p=s):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+a.imageSize)}n.setAttribute("style",n.getAttribute("style")+"width:"+o+"px; height:"+p+"px")}b.setAttribute("data-has-cancel-button",a.showCancelButton),a.showCancelButton?j.style.display="inline-block":g.hide(j),b.setAttribute("data-has-confirm-button",a.showConfirmButton),a.showConfirmButton?k.style.display="inline-block":g.hide(k),a.cancelButtonText&&(j.innerHTML=g.escapeHtml(a.cancelButtonText)),a.confirmButtonText&&(k.innerHTML=g.escapeHtml(a.confirmButtonText)),a.confirmButtonColor&&(k.style.backgroundColor=a.confirmButtonColor,k.style.borderLeftColor=a.confirmLoadingButtonColor,k.style.borderRightColor=a.confirmLoadingButtonColor,f.setFocusStyle(k,a.confirmButtonColor)),b.setAttribute("data-allow-outside-click",a.allowOutsideClick);var t=!!a.doneFunction;b.setAttribute("data-has-done-function",t),a.animation?"string"==typeof a.animation?b.setAttribute("data-animation",a.animation):b.setAttribute("data-animation","pop"):b.setAttribute("data-animation","none"),b.setAttribute("data-timer",a.timer)};d.default=i,b.exports=d.default},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(b,c,d){Object.defineProperty(d,"__esModule",{value:!0});var e=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},f=function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?parseInt(b[1],16)+", "+parseInt(b[2],16)+", "+parseInt(b[3],16):null},g=function(){return a.attachEvent&&!a.addEventListener},h=function(b){a.console&&a.console.log("SweetAlert: "+b)},i=function(a,b){a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),b=b||0;var c,d,e="#";for(d=0;3>d;d++)c=parseInt(a.substr(2*d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e+=("00"+c).substr(c.length);return e};d.extend=e,d.hexToRgb=f,d.isIE8=g,d.logStr=h,d.colorLuminance=i},{}]},{},[1]),"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document);var C37BackendValidation={makeValidationArea:function(a){return'<div class="validation">'+a+"</div>"},validationHTML:{common:'<label>Validation</label><% var elementValidation = validation[this.model.get("name")] || {}; %><input data-for="required" type="checkbox" <%= elementValidation.required? "checked" : "" %> /> Required',min_length:"<label>Min length (characters)</label>",max_length:"<label>Max length (characters)</label>",textInput:"",textarea:"",file:'<label>File type</label><select <% var value=elementValidation.fileType %> data-for="file-type"><option <%= value==""? "selected" : "" %> value="">Any</option><option <%= value=="image/*"? "selected" : "" %> value="image/*">Images</option><option <%= value=="audio/*"? "selected" : "" %> value="audio/*">Audios</option><option <%= value=="video/*"? "selected" : "" %> value="video/*">Videos</option><option <%= value=="text/html"? "selected" : "" %> value="text/html">HTML Files</option><option <%= value==".doc,.docx,.pdf"? "selected" : "" %> value=".doc,.docx,.pdf">Documents</option></select>'},textValidation:function(){return this.makeValidationArea(this.validationHTML.common+this.validationHTML.textInput)},textAreaValidation:function(){return this.makeValidationArea(this.validationHTML.common)},fileValidation:function(){return this.makeValidationArea(this.validationHTML.common+this.validationHTML.file)}},UPGRADE_TO_UNLOCK_TEMPLATE="This style is in the pro version only. Please get the pro version to access all styles.",UPGRADE_TO_USE_IMAGE="Image element is available in the PRO version only. Please upgrade to use image in your form",UPGRADE_TO_USE_RATING="Stars rating is available in the PRO version only. Please upgrade to use ratings in your form",ERROR_MISSING_FORM_NAME="Please enter a name for your form",SUCCESS_FORM_SAVED="Form saved!",SUCCESS_CODE_SAVED="Code saved!",SUCCESS_EMAIL_SAVED="Email saved!",SUCCESS_SUBSCRIBER_DATA_CLEARED="Subscribers data for currently selected form cleared!",INFO_LOADING_SUBSCRIBERS_DATA="Loading subscribers data",ERROR_PLEASE_SOLVE_CAPTCHA="Please solve the captcha",ERROR_INPUT_NOT_VALID="Your input is not valid! ",INFO_CLEAR_SUBSCRIBERS="Clear subscribers data?",INFO_CLEAR_SUBSCRIBERS_EXPLAIN="You are going to clear subscribers data for currently selected form. This cannot be undone",INFO_SUBSCRIBERS_CLEARED="Subscribers data cleared!",versionNangCap=!1,core37Form={formID:0,formName:"",formContent:{},formSettings:{action:"",width:"500",method:"post",cssID:"c37-form-"+Math.floor(9999*Math.random()),presetCSSStyle:"c37-form-style-1",afterSubmitURL:"",sendNotification:!1,sendAutoReply:!1,afterSubmitMessage:"",replyToField:"",subjectField:""},friendlyNames:{}},defaultValues={};jQuery.post(ajaxurl,{action:"core37_get_form_styles"},function(a){core37Form.styles=JSON.parse(a)}),jQuery.post(ajaxurl,{action:"core37_get_default_parameters"},function(a){Object.assign(defaultValues,JSON.parse(a))}),defaultValues.starsRatingOptions={theme:"fontawesome-stars",initialRating:1,showValues:!1,showSelectedRating:!0,allowEmpty:!0};var elementsActions={};toastr.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-center",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var elementsStyles={},validation={},math=[{}],C37ElementModel=Backbone.Model.extend({defaults:{style:{},action:{},size:{}}}),elementStyle={textColor:'<div class="css-styles"><label class="section-header">Text color:</label><div data-for="text-color"><input data-for="color" type="color" value="<%= styles["color"] == null || styles[\'color\'] ==\'\' ? "#fffffa" : styles[\'color\'] %>"> <i data-for="clear-text-color" class="fa fa-hand-paper-o reset-color"></i></div></div>',background:'<div class="css-styles"><div id="c37-background-settings"><label class="section-header">Background</label><div><div class="c37-col-xs-4"  data-for="background-color"><label>Color:</label><input type="color" value="<%= styles["background-color"] == null || styles[\'background-color\'] == ""? "#fffffa" : styles[\'background-color\'] %>" > <i class="fa fa-hand-paper-o reset-color"></i></div><div class="c37-col-xs-4"  data-for="background-image"><label>Image:</label><img src="<%= styles[\'background-image\'] %>" id="c37-image-preview" /><br /><input type="hidden" value="<%= styles[\'background-image\'] %>" /><i href="#" id="change-background-image" class="fa fa-folder-open"></i><i href="#" id="remove-background-image" class="fa fa-close"></i></div><div class="c37-col-xs-4"  data-for="background-image-style"><label>Style:</label><select><option <%= styles[\'background-image-style\'] == "no-repeat" ? "selected" : "" %> value="no-repeat">no repeat</option><option <%= styles[\'background-image-style\'] == "repeat" ? "selected" : "" %> value="repeat">repeat</option><option <%= styles[\'background-image-style\'] == "repeat-x" ? "selected" : "" %> value="repeat-x">repeat x</option><option <%= styles[\'background-image-style\'] == "repeat-y" ? "selected" : "" %> value="repeat-y">repeat y</option><option <%= styles[\'background-image-style\'] == "cover" ? "selected" : "" %> value="cover">cover</option><option <%= styles[\'background-image-style\'] == "contain" ? "selected" : "" %> value="cover">contain</option></select></div><div class="clearfix"></div></div></div></div>',elementSize:'<div class="c37-col-xs-12"><label class="section-header">Element width:</label><div><select <% var size = (this.model.get(\'size\')); %> data-for="element-width"><option <%= size.size == 2 ? "selected": "" %> value="2">2</option><option <%= size.size == 3 ? "selected": "" %>  value="3">3</option><option <%= size.size == 4 ? "selected": "" %>  value="4">4</option><option <%= size.size == 5 ? "selected": "" %>  value="5">5</option><option <%= size.size == 6 ? "selected": "" %>  value="6">6</option><option <%= size.size == 7 ? "selected": "" %>  value="7">7</option><option <%= size.size == 8 ? "selected": "" %>  value="8">8</option><option <%= size.size == 9 ? "selected": "" %>  value="9">9</option><option <%= size.size == 10 ? "selected": "" %>  value="10">10</option><option <%= size.size == 11 ? "selected": "" %>  value="11">11</option><option <%= size.size == 12 ? "selected": "" %>  value="12">12</option></select><br /><span><input type="checkbox" <%= size.expand? "checked" : "" %>  data-for="expand" /> Expand full on small screen</span></div></div>',border:'<div class="css-styles"><div id="c37-border-settings"><label class="section-header">Border</label><div><div class="c37-col-xs-3"><label>Style:  <select data-for="border-style"><option  <%= styles[\'border-style\'] == "none" ? "selected" : "" %>  value="none">none</option><option  <%= styles[\'border-style\'] == "solid" ? "selected" : "" %>  value="solid">solid</option><option  <%= styles[\'border-style\'] == "dashed" ? "selected" : "" %>  value="dashed">dashed</option><option  <%= styles[\'border-style\'] == "dotted" ? "selected" : "" %>  value="dotted">dotted</option></select></label></div><div class="c37-col-xs-3"><label>Width: <input value="<%= styles[\'border-width\'] %>" type="number" data-for="border-width" /></label></div><div class="c37-col-xs-3"><label>Color: <input value="<%= styles[\'border-color\'] == null || styles[\'border-color\'] ==\'\' ? \'#fffffa\' : styles[\'border-color\'] %>" type="color" data-for="border-color" /></label></div><div class="c37-col-xs-3"><label>Radius: <input value="<%= styles[\'border-radius\'] %>" type="number" data-for="border-radius" /></label></div><div id="c37-border-width-settings"><label class="c37-col-xs-3">Top: <input data-for="border-top-width" value="<%= styles[\'border-top-width\'] %>" type="number"/></label><label class="c37-col-xs-3">Right: <input data-for="border-right-width" value="<%= styles[\'border-right-width\'] %>" type="number"/></label><label class="c37-col-xs-3">Bottom: <input data-for="border-bottom-width" value="<%= styles[\'border-bottom-width\'] %>" type="number"/></label><label class="c37-col-xs-3">Left: <input data-for="border-left-width" value="<%= styles[\'border-left-width\'] %>" type="number"/></label></div><div id="c37-border-radius-settings"><label class="c37-col-xs-3">T-L: <input data-for="border-top-left-radius" value="<%= styles[\'border-top-left-radius\'] %>" type="number"/></label><label class="c37-col-xs-3">T-R: <input data-for="border-top-right-radius" value="<%= styles[\'border-top-right-radius\'] %>" type="number" /></label><label class="c37-col-xs-3">B-L: <input data-for="border-bottom-left-radius" value="<%= styles[\'border-bottom-left-radius\'] %>" type="number"/></label><label class="c37-col-xs-3">B-R: <input data-for="border-bottom-right-radius" value="<%= styles[\'border-bottom-right-radius\'] %>" type="number"/></label></div></div></div></div>',margin:'<div class="css-styles"><div id="c37-margin-padding-settings"><label class="section-header">Margin</label><div id="c37-margin-settings" data-for="margin"><label class="c37-col-xs-3">Top: <input value="<%= styles[\'margin-top\'] %>" type="number" class="top" /></label><label class="c37-col-xs-3">Right: <input value="<%= styles[\'margin-right\'] %>" type="number" class="right" /></label><label class="c37-col-xs-3">Bottom: <input value="<%= styles[\'margin-bottom\'] %>" type="number" class="bottom" /></label><label class="c37-col-xs-3">Left: <input value="<%= styles[\'margin-left\'] %>" type="number" class="left" /></label></div><label class="section-header">Padding</label><div id="c37-padding-settings" data-for="padding"><label class="c37-col-xs-3">Top: <input value="<%= styles[\'padding-top\'] %>" type="number" class="top" /></label><label class="c37-col-xs-3">Right: <input value="<%= styles[\'padding-right\'] %>" type="number" class="right" /></label><label class="c37-col-xs-3">Bottom: <input value="<%= styles[\'padding-bottom\'] %>" type="number" class="bottom" /></label><label class="c37-col-xs-3">Left: <input value="<%= styles[\'padding-left\'] %>" type="number" class="left" /></label></div></div></div>'},actionArea='<div class="element-action"><label>Trigger</label><select data-for="trigger"><option value="no-trigger"></option><option <%= this.model.get("action").trigger=="click" ? "selected" : "" %> value="click">On this element click</option></select><label>Action</label><select data-for="action"><option  value="do-nothing"></option><option <%= this.model.get("action").action=="submit-form" ? "selected" : "" %> value="submit-form">Submit form</option></select></div>',textEditOptions={general:'<label>Placeholder: </label><input type="text" data-for="placeholder" value="<%= this.model.get(\'placeholder\') %>" /><label>Label</label><input type="text" value="<%= this.model.get(\'label\') %>" data-for="input-label" placeholder="enter label" /><label>Type:</label><select <% var type = this.model.get(\'type\') %> data-for="input-type"><option <%= type=="text"? "selected" : "" %> value="text">Text</option><option <%= type=="email"? "selected" : "" %> value="email">Email</option><option <%= type=="url"? "selected" : "" %> value="url">URL</option><option <%= type=="number"? "selected" : "" %> value="number">Number</option><option <%= type=="password"? "selected" : "" %> value="password">Password</option><option <%= type=="tel"? "selected" : "" %> value="tel">Phone</option></select><span class="reply-to <%= type==\'email\' ? \'\':\'hidden\' %> "><input  <%= core37Form.formSettings.replyToField == this.model.get("name")? "checked" : ""  %> type="checkbox" data-for="reply-to" /> Reply to this email</span><span  class="email-subject <%= type==\'text\' ? \'\':\'hidden\' %>"><input <%= core37Form.formSettings.subjectField == this.model.get("name")? "checked" : ""  %> type="checkbox" data-for="email-subject" /> This is email\'s subject</span><label>Icon</label><div class="fa-icon"><i class="fa <%= this.model.get(\'icon\') ? this.model.get(\'icon\'): \'\' %>"></i><input data-for="icon" value="<%= this.model.get(\'icon\')? this.model.get(\'icon\'): \'\' %> " type="text" id="fa-icon-input" /> </div>',advanced:'<label>Field name:</label><input type="text" data-for="name" value="<%= this.model.get(\'name\') %>" />'+C37BackendValidation.textValidation(),action:actionArea,style:elementStyle.textColor+elementStyle.elementSize},fileEditOptions={general:'<label>Upload multiple files?</label><input <%= this.model.get(\'multiple\')? "checked" : "" %> type="checkbox" data-for="multiple" /><label>Text</label><input data-for="text" type="text" value="<%= this.model.get(\'text\') %>" placeholder="upload text" /><label>Icon</label><div class="fa-icon"><i class="<%= this.model.get(\'icon\') ? this.model.get(\'icon\'): \'\' %>"></i><input <%= versionNangCap ? ""  : "disabled" %> data-for="icon" value="<%= this.model.get(\'icon\')? this.model.get(\'icon\'): \'\' %> " type="text" id="fa-icon-input" /> </div>',advanced:"<label>Field name: </label><input type=\"text\" data-for=\"name\" value=\"<%= this.model.get('name').replace('[','').replace(']','') %>\" />"+C37BackendValidation.fileValidation(this.model),style:"",action:""},checkboxEditOptions={general:'<div class="row options"><span class="c37-col-xs-8"><label>Value</label></span><span class="c37-col-xs-4"><label>Check</label></span><% var options = this.model.get(\'options\'); _.each(options, function(o){ %>  <div><span class="c37-col-xs-8"><input type="text" data-for="value" value="<%= decodeURIComponent(o.value) %>" />  </span><span class="c37-col-xs-4 check"><input type="checkbox" data-for="checked" <%= o.checked? "checked" : "" %> />  </span><span class="hidden"><input type="text" data-for="id" value="<%= o.id %>" /></span></div><%}) %></div><button class="add-option"><i class="fa fa-plus"></i> Add option</button>',advanced:'<label>Name</label><input data-for="name" type="text" value="<%= this.model.get(\'name\') %>" placeholder="enter a name for your field" /><label>Options alignment</label><select <% var alignment = this.model.get(\'alignment\'); %> data-for="alignment"><option <%= alignment=="c37-vertical"? "selected" : "" %> value="c37-vertical">Vertical</option><option <%= alignment=="c37-horizontal"? "selected" : "" %> value="c37-horizontal">Horizontal</option></select>',style:elementStyle.textColor+elementStyle.elementSize,action:actionArea},radioEditOptions={general:'<div class="row options"><span class="c37-col-xs-8"><label>Value</label></span><span class="c37-col-xs-4"><label>Select</label></span><% var options = this.model.get(\'options\'); _.each(options, function(o){ %>  <div><span class="c37-col-xs-8"><input type="text" data-for="value" value="<%= decodeURIComponent(o.value) %>" />  </span><span class="c37-col-xs-4 check"><input type="radio" data-for="checked" name="radio-settings" <%= o.checked? "checked" : "" %> />  </span><span class="hidden"><input type="text" data-for="id" value="<%= o.id %>" /></span></div><%}) %></div><button class="add-option"><i class="fa fa-plus"></i> Add option</button>',advanced:'<label>Name</label><input data-for="name" type="text" value="<%= this.model.get(\'name\') %>" placeholder="enter a name for your field" /><label>Options alignment</label><select <% var alignment = this.model.get(\'alignment\'); %> data-for="alignment"><option <%= alignment=="c37-vertical"? "selected" : "" %> value="c37-vertical">Vertical</option><option <%= alignment=="c37-horizontal"? "selected" : "" %> value="c37-horizontal">Horizontal</option></select>',style:elementStyle.textColor+elementStyle.elementSize,action:actionArea},labelEditOptions={general:'<label>Content: </label><input type="text" data-for="label" placeholder="enter your label" value="<%= this.model.get(\'content\') %>" /> <input type="checkbox" <%= this.model.get("required") ? "checked" : "" %> data-for="required"> Field is required',advanced:"",style:elementStyle.textColor+elementStyle.elementSize,action:null},headingEditOptions={general:'<label>Content: </label><input type="text" data-for="heading" placeholder="enter text content" value="<%= this.model.get(\'content\') %>" /> <label>Type: </label><select <% var tagName = this.model.get(\'tagName\'); %> data-for="tagName"><option <%= tagName=="h1"? "selected" : ""  %> value="h1">h1</option><option <%= tagName=="h2"? "selected" : ""  %>  value="h2">h2</option><option <%= tagName=="h3"? "selected" : ""  %>  value="h3">h3</option><option <%= tagName=="h4"? "selected" : ""  %>  value="h4">h4</option><option <%= tagName=="h5"? "selected" : ""  %>  value="h5">h5</option><option <%= tagName=="h6"? "selected" : ""  %>  value="h6">h6</option></select>',advanced:"",style:elementStyle.textColor+elementStyle.elementSize,action:null},paragraphEditOptions={general:'<label>Content: </label><textarea data-for="paragraph" placeholder="enter text content"><%= this.model.get(\'content\') %></textarea> ',advanced:"",style:"",action:""},textAreaEditOptions={general:'<label>Placeholder: </label><input type="text" data-for="placeholder" placeholder="enter placeholder" value="<%= this.model.get(\'placeholder\') %>" /> <label>Label</label><input value="<%= this.model.get(\'label\') %>" type="text" data-for="input-label" placeholder="enter label" />',advanced:'<label>Field name: </label><input type="text" data-for="name" placeholder="enter field name" value="<%= this.model.get(\'name\') %>" /> '+C37BackendValidation.textAreaValidation(),style:elementStyle.textColor+elementStyle.elementSize,action:actionArea},buttonEditOptions={general:'<label>Button Text: </label><input type="text" data-for="text" placeholder="button text" value="<%= this.model.get(\'text\') %>" /> ',advanced:"",style:elementStyle.textColor+elementStyle.elementSize,action:actionArea},dateEditOptions={general:'<label <% var type = this.model.get(\'type\'); %> >Default value: </label><input type="<%= type %>" data-for="default-value" value="<%= this.model.get(\'value\') %>" /><label>Type:</label><select data-for="date-type"><option <%= type=="date"? "selected" : "" %> value="date">Date</option></select>',advanced:'<label>Field name:</label><input type="text" data-for="name" value="<%= this.model.get(\'name\') %>" />',style:elementStyle.textColor+elementStyle.elementSize,action:actionArea},selectEditOptions={general:"<div class=\"row options\"><span class=\"c37-col-xs-12\"><label>Values</label></span><% var options = this.model.get('options'); var allValue= ''; _.each(options, function(o){ %>  <% allValue+=o.value+'\\n';  %><%}) %><textarea data-for=\"value\"><%= decodeURIComponent(allValue) %></textarea></div><label>Selected value</label><select data-for=\"selected\"><% var selected_value = this.model.get('selected_value'); _.each(options, function(option){ %><option <%= option.value == selected_value? 'selected': '' %> value=\"<%= option.value %>\"><%= decodeURIComponent(option.value) %></option><% }) %></select>",advanced:'<label>Name</label><input data-for="name" type="text" value="<%= this.model.get(\'name\') %>" placeholder="enter a name for your field" />',style:elementStyle.textColor+elementStyle.elementSize,action:actionArea},acceptanceEditOptions={general:'<label>Text: </label><input type="text" data-for="text" placeholder="enter acceptance text" value="<%= this.model.get(\'text\') %>" /><label>Error message(<small>When not checked</small>)</label><input type="text" data-for="error" placeholder="enter error message" value="<%= this.model.get(\'error_message\') %>" /> ',advanced:'<label>Field name:</label><input disabled type="text" data-for="name" value="<%= this.model.get(\'name\') %>" />',
style:elementStyle.textColor,action:actionArea},rowEditOptions={general:'<label>Row layout</label><select data-for="layout"><option <%= layout=="12"? "selected" : "" %> value="12">1</option><option <%= layout=="6-6"? "selected" : "" %> value="6-6">1/2 + 1/2</option><option <%= layout=="4-4-4"? "selected" : "" %> value="4-4-4">1/3 + 1/3 + 1/3</option><option <%= layout=="4-8"? "selected" : "" %> value="4-8">1/3 + 2/3</option><option <%= layout=="8-4"? "selected" : "" %> value="8-4">2/3 + 1/3</option><option <%= layout=="3-3-3-3"? "selected" : "" %> value="3-3-3-3">1/4 + 1/4 + 1/4 + 1/4</option><option <%= layout=="3-3-6"? "selected" : "" %> value="3-3-6">1/4 + 1/4 + 2/4</option><option <%= layout=="3-9"? "selected" : "" %> value="3-9">1/4 + 3/4</option><option <%= layout=="3-6-3"? "selected" : "" %> value="3-6-3">1/4 + 2/4 + 1/4</option><option <%= layout=="6-3-3"? "selected" : "" %> value="6-3-3">2/4 + 1/4 + 1/4</option><option <%= layout=="9-3"? "selected" : "" %> value="9-3">3/4 + 1/4</option></select>',advanced:"",style:elementStyle.textColor,action:actionArea},formEditOptions={general:'<label>Form name</label><input id="form-name" type="text" value="<%= core37Form.formName %>" placeholder="form name" data-for="name" /><label>Form width (<small><em>in px, leave blank for full width</em></small>)</label><span><input type="number" value="<%= this.model.get("width") %>" data-for="width" /></span>',advanced:'<label>After-submit message</label><input type="text" data-for="afterSubmitMessage" value="<%= this.model.get(\'afterSubmitMessage\') %>" placeholder="enter your message" /><label>After-submit URL</label><input type="text" placeholder="enter your URL" class="c37-col-xs-12" value="<%= this.model.get(\'afterSubmitURL\') %>" data-for="afterSubmitURL" /><label><input <%= this.model.get("sendNotification") ? "checked" : "" %> type="checkbox" data-for="sendNotification" <span>Send notification (to your email) when form submitted</span></label><label><input disabled <%= this.model.get("sendAutoReply") ? "checked" : "" %> type="checkbox" data-for="sendAutoReply" <span>Send auto-reply to people who submit form</span></label>',style:'<label>Preset styles</label><select data-for="form-style"><% _.each(core37Form.styles, function(s){  %><option <%= s.class==core37Form.formSettings.presetCSSStyle? \'selected\' : \'\' %> value="<%= s.class %>" > <%= "Style "+ s.class.slice(-1) %> </option><% }) %></select>',action:""},imageEditOptions={general:'<label>Select image</label><img class="c37-image-preview" src="<%= this.model.get( \'imgSrc\')%>" /><button id="c37-image-picker">Change image...</button>',advanced:"",style:elementStyle.textColor+elementStyle.background+elementStyle.border+elementStyle.margin,action:""},starsEditOptions={general:'<% var initialRating = this.model.get("initialRating"); var theme = this.model.get("theme"); var id = this.model.get("id"); var optionsString = ""; var options = this.model.get("options"); _.each(options, function(option){ optionsString += option.value + "\\n"; }) %><label>Select style</label><select data-for="theme"><option <%= theme == "fontawesome-stars" ? "selected" : ""  %> value="fontawesome-stars">Round-edges Stars</option><option <%= theme == "css-stars" ? "selected" : ""  %> value="css-stars">Sharp-edges Stars</option><option <%= theme == "bars-1to10" ? "selected" : ""  %> value="bars-1to10">Bars</option><option <%= theme == "bars-horizontal" ? "selected" : ""  %> value="bars-horizontal">Stack bars</option><option <%= theme == "bars-movie" ? "selected" : ""  %> value="bars-movie">Flat bar</option><option <%= theme == "bars-pill" ? "selected" : ""  %> value="bars-pill">Pills</option><option <%= theme == "bars-square" ? "selected" : ""  %> value="bars-square">Blue boxes</option></select><label>Values</label><textarea data-for="options"><%= jQuery.trim(optionsString) %></textarea><label>Initial value</label><select data-for="initial-rating"><% _.each(options, function(option) {  %><option <%= option.value == initialRating ? "selected" : "" %>  value="<%= option.value %>"> <%= option.text %> </option><% }) %></select><label>Show values</label><input <%= this.model.get("showValues")? "checked" : ""%> type="checkbox" data-for="show-labels" /> Show values for each rating<label>Show selected value</label><input <%= this.model.get("showSelectedRating")? "checked" : ""%>  type="checkbox" data-for="show-selected" /> Show currently selected value',advanced:'<label>Field name</label><input data-for="name" type="text" placeholder="set a name for your field" value="<%= this.model.get(\'name\') %>" />',style:'<label>Stars color</label><input type="color" data-for="star-color" />',action:""},Forms={textEdit:{general:textEditOptions.general,advanced:textEditOptions.advanced,style:textEditOptions.style,action:textEditOptions.action,parentClass:"for-text"},checkboxEdit:{general:checkboxEditOptions.general,advanced:checkboxEditOptions.advanced,style:checkboxEditOptions.style,action:checkboxEditOptions.action,parentClass:"for-checkbox"},radioEdit:{general:radioEditOptions.general,advanced:radioEditOptions.advanced,style:radioEditOptions.style,action:radioEditOptions.action,parentClass:"for-radio"},labelEdit:{general:labelEditOptions.general,advanced:labelEditOptions.advanced,style:labelEditOptions.style,action:labelEditOptions.action,parentClass:"for-label"},headingEdit:{general:headingEditOptions.general,advanced:headingEditOptions.advanced,style:headingEditOptions.style,action:headingEditOptions.action,parentClass:"for-heading"},paragraphEdit:{general:paragraphEditOptions.general,advanced:paragraphEditOptions.advanced,style:paragraphEditOptions.style,action:paragraphEditOptions.action,parentClass:"for-paragraph"},textAreaEdit:{general:textAreaEditOptions.general,advanced:textAreaEditOptions.advanced,style:textAreaEditOptions.style,action:textAreaEditOptions.action,parentClass:"for-textarea"},buttonEdit:{general:buttonEditOptions.general,advanced:buttonEditOptions.advanced,style:buttonEditOptions.style,action:buttonEditOptions.action,parentClass:"for-button"},dateEdit:{general:dateEditOptions.general,advanced:dateEditOptions.advanced,style:dateEditOptions.style,action:dateEditOptions.action,parentClass:"for-date"},selectEdit:{general:selectEditOptions.general,advanced:selectEditOptions.advanced,style:selectEditOptions.style,action:selectEditOptions.action,parentClass:"for-select"},acceptanceEdit:{general:acceptanceEditOptions.general,advanced:acceptanceEditOptions.advanced,style:acceptanceEditOptions.style,action:acceptanceEditOptions.action,parentClass:"for-acceptance"},formEdit:{general:formEditOptions.general,advanced:formEditOptions.advanced,style:formEditOptions.style,action:formEditOptions.action,parentClass:"for-form"},rowEdit:{general:rowEditOptions.general,advanced:rowEditOptions.advanced,style:rowEditOptions.style,action:"",parentClass:"for-row"},fileEdit:{general:fileEditOptions.general,advanced:fileEditOptions.advanced,style:fileEditOptions.style,action:fileEditOptions.action,parentClass:"for-file"},imageEdit:{general:imageEditOptions.general,advanced:"",style:"",action:"",parentClass:"for-image"},starsEdit:{general:starsEditOptions.general,advanced:starsEditOptions.advanced,style:"",action:starsEditOptions.action,parentClass:"for-stars"}},C37FormElement=Backbone.View.extend({renderSize:function(){if(this.model&&this.model.get("size")){var a="c37-col-md-"+this.model.get("size").size;this.model.get("size").expand&&(a+=" c37-col-xs-12");for(var b=1;b<=12;b++)this.$el.removeClass("c37-col-md-"+b);this.$el.addClass(a)}}}),Heading=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<h1 class="c37-child">This is heading</h1>'),render:function(){if(this.model){var a="<"+this.model.get("tagName")+'  class="c37-child">'+this.model.get("content")+"</"+this.model.get("tagName")+">";console.log("tagName"+this.model.get("tagName")),this.$el.html(a)}else this.$el.html(this.template)}}),Paragraph=C37FormElement.extend({initialize:function(){this.render()},template:_.template("<p>This is paragraph</p>"),render:function(){this.model?this.$el.html("<p>"+this.model.get("content")+"</p>"):this.$el.html(this.template())}}),Row=Backbone.View.extend({initialize:function(){this.render()},template:_.template('<div class="c37-box c37-col-xs-12"></div>'),render:function(){this.setElement(this.template({}))}}),Step=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<div class="c37-step c37-style-1 c37-container"><div class="c37-row" id="c37-row-0" data-c37-layout="12"><div class="c37-box c37-col-md-12"></div></div></div>'),render:function(){this.setElement(this.template({}))}}),CheckBox=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<span class="c37-single-checkbox" class="c37-child" <% var cid= \'checkbox_id_\' + Math.floor(Math.random() * 10000) %> ><input id="<%= cid %>" type="checkbox" name="<%= name %>" value="First"/><label class="c37-blank-label" for="<%= cid %>"></label> <span> First</span></span> <span class="c37-single-checkbox" class="c37-child" <% var cid= \'checkbox_id_\' + Math.floor(Math.random() * 10000) %> ><input id="<%= cid %>" type="checkbox" name="<%= name %>" value="Second"/><label class="c37-blank-label" for="<%= cid %>"></label> <span> Second</span></span> '),render:function(){if(this.model){var a="",b=this.model.get("name");_.each(this.model.get("options"),function(c){var d=c.checked?"checked":"";a+='<span class="c37-child c37-single-checkbox"><input id="'+c.id+'"  type="checkbox" '+d+'  name="'+b+'" value="'+c.value+'"/><label class="c37-blank-label" for="'+c.id+'"></label> <span>'+decodeURIComponent(c.value)+"</span></span> "}),jQuery(this.$el).closest(".c37-form-element").removeClass("c37-vertical"),jQuery(this.$el).closest(".c37-form-element").removeClass("c37-horizontal"),jQuery(this.$el).closest(".c37-form-element").addClass(this.model.get("alignment")),this.$el.html(a)}else this.$el.html(this.template({name:"checkbox_"+Math.floor(1e3*Math.random())}))}}),Radio=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<span class="c37-single-radio c37-child" <% var cid= \'radio_id_\' + Math.floor(Math.random() * 10000) %>><input id="<%= cid %>" type="radio" name="<%= name %>" value="First" /><label class="c37-blank-label" for="<%= cid %>"></label> <span >First</span></span> <span class="c37-single-radio c37-child" <% var cid= \'radio_id_\' + Math.floor(Math.random() * 10000) %>><input id="<%= cid %>" type="radio" name="<%= name %>" value="Second" /><label class="c37-blank-label" for="<%= cid %>"></label> <span >Second</span></span> '),render:function(){if(this.model){var a="",b=this.model.get("name");_.each(this.model.get("options"),function(c){var d=c.checked?"checked":"";a+='<span class="c37-child c37-single-radio"><input id="'+c.id+'"  type="radio" '+d+'  name="'+b+'" value="'+c.value+'"/> <label class="c37-blank-label" for="'+c.id+'"></label> <span>'+decodeURIComponent(c.value)+"</span></span> "}),jQuery(this.$el).closest(".c37-form-element").removeClass("c37-vertical"),jQuery(this.$el).closest(".c37-form-element").removeClass("c37-horizontal"),jQuery(this.$el).closest(".c37-form-element").addClass(this.model.get("alignment")),this.$el.html(a)}else this.$el.html(this.template({name:"radio_"+Math.floor(1e3*Math.random())}))}}),Text=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<i class="fa fa-envelope c37-suggest-icon"></i><input class="c37-child" id="<%= id %>" name="<%= name %>" type="text" placeholder="enter something" />'),render:function(){if(this.model){console.log("has model..."),"name"!=this.model.get("name")&&"email"!=this.model.get("name")||(console.log("what"),this.model.set({name:"_"+this.model.get("name")}));var a="";"undefined"!=typeof this.model.get("label")&&""!=this.model.get("label")&&(a+='<label for="'+this.model.get("cssID")+'">'+this.model.get("label")+"</label>"),a+='<i class="fa '+this.model.get("icon")+' c37-suggest-icon"></i><input id="'+this.model.get("cssID")+'" class="c37-child" type="'+this.model.get("type")+'" name="'+this.model.get("name")+'" placeholder="'+this.model.get("placeholder")+'" />',this.$el.html(a),this.renderSize()}else this.$el.html(this.template({name:"input_"+Math.floor(1e3*Math.random()),id:"input_"+Math.floor(1e3*Math.random())}))}}),DateInput=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<i class="fa fa-calendar c37-suggest-icon"></i><input class="c37-child" name="<%= name %>" type="date"/>'),render:function(){if(this.model){var a='<i class="fa fa-calendar c37-suggest-icon"></i><input name="'+this.model.get("name")+'" type="'+this.model.get("type")+'" value="'+this.model.get("value")+'"/>';this.$el.html(a)}else this.$el.html(this.template({name:"date_input_"+Math.floor(1e3*Math.random())}))}}),Select=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<select class="c37-child" name="<%= name %>"><option value="Cat">Cat</option><option value="Dog">Dog</option><option value="Chicken">Chicken</option></select>'),render:function(){if(this.model){var a="",b=this.model;_.each(this.model.get("options"),function(c){var d=c.value==b.get("selected_value")?"selected":"";a+="<option "+d+' value="'+c.value+'">'+decodeURIComponent(c.value)+"</option>"}),a='<select name="'+name+'">'+a+"</select>",this.$el.html(a)}else this.$el.html(this.template({name:"select_"+Math.floor(1e3*Math.random())}))}}),Label=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<label for="<%= forID %>"><%= content %></label>'),render:function(){if(this.model)if(this.model.get("required"))this.$el.html("<label>"+this.model.get("content")+'<sup class="required">*</sup></label>');else{var a=this.model.get("content");this.$el.html(this.template({forID:"input_"+Math.floor(1e3*Math.random()),content:a}))}else this.$el.html(this.template({forID:"input_"+Math.floor(1e3*Math.random()),content:"Label"}));this.renderSize()}}),Button=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<button data-role="submit" class="c37-child">Button</button>'),render:function(){if(this.model){var a='<button data-role="submit" class="c37-child">'+this.model.get("text")+"</button>";this.$el.html(a),this.renderSize()}else this.$el.html(this.template())}}),TextArea=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<i class="fa fa-edit c37-suggest-icon"></i><textarea id="<%= id %>" class="c37-child" name="<%= name %>" placeholder="enter something"></textarea>'),render:function(){if(this.model){var a="";"undefined"!=typeof this.model.get("label")&&""!=this.model.get("label")&&(a+='<label for="'+this.model.get("cssID")+'">'+this.model.get("label")+"</label>"),a+='<i class="fa fa-edit c37-suggest-icon"></i><textarea id="'+this.model.get("cssID")+'" class="c37-child" name="'+this.model.get("name")+'" placeholder="'+this.model.get("placeholder")+'"></textarea>',this.$el.html(a),this.renderSize()}else this.$el.html(this.template({name:"textarea_"+Math.floor(1e3*Math.random()),id:"textarea_"+Math.floor(1e3*Math.random())}))}}),File=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<div class="c37-child"></label><input id="<%= field_id %>" class="c37-child" name="<%= name %>" type="file" /><label class="c37-file-label" for="<%= field_id %>"><i class="fa fa-cloud-upload"></i> <%= text %> </div>'),render:function(){if(this.model){var a=this.model.get("multiple")?"multiple":"",b=this.model.get("multiple")?this.model.get("name"):this.model.get("name"),c=this.model.get("file_type")?'accept="'+this.model.get("file_type").type+'"':"",d=this.model.get("icon"),e=this.model.get("text"),f='<div class="c37-child"><label class="c37-file-label" for="'+this.model.get("field_id")+'"><i class="fa '+d+'"></i>'+e+'</label><input type="file" id="'+this.model.get("field_id")+'" name="'+b+'" '+a+" "+c+" /></div>";this.$el.html(f)}else this.$el.html(this.template({name:"attachment_"+Math.floor(1e3*Math.random()),field_id:"c37_attachment_"+Math.floor(1e4*Math.random()),text:"Select file..."}))}}),Acceptance=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<input class="c37-acceptance" id="<%= id %>" data-error="Please accept this" name="<%= name %>" type="checkbox" /><label for="<%= id %>" class="c37-acceptance-label"></label> <span class="c37-child">I agree with terms of service</span>'),render:function(){if(this.model){console.log(this.model);var a='<input id="'+this.model.get("id")+'" data-error="'+this.model.get("error_message")+'" class="c37-acceptance" name="'+this.model.get("name")+'" type="checkbox" /><label for="'+this.model.get("id")+'" class="c37-acceptance-label"></label> <span class="c37-child">'+this.model.get("text")+"</span>";this.$el.html(a)}else this.$el.html(this.template({name:"acceptance",id:"acceptance_id_"+Math.floor(1e4*Math.random())}))}}),ReCaptcha=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<div class="g-recaptcha" data-sitekey="<%= site_key %>"></div>'),render:function(){serverSettings.recaptchaSiteKey||swal("You haven't configured recaptcha settings. Please get reCaptcha keys first"),this.$el.html(this.template({site_key:serverSettings.recaptchaSiteKey}))}}),FieldSet=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<fieldset class="c37-box"><legend>Fieldset legend:</legend></fieldset>'),render:function(){this.setElement(this.template({}))}}),Image=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<img src="<%= imgSrc %>"/>'),render:function(){this.model?this.$el.html(this.template({imgSrc:this.model.get("imgSrc")})):this.$el.html(this.template({imgSrc:defaultValues.imagePlaceholder}))}}),Stars=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<select name="<%= name %>" data-show-selected="false" data-show-values="false" data-initial-rating="1" data-theme="<%= theme %>" class="c37-star-rating" id="<%= id %>"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select>'),render:function(){var a="";if(this.model){var b="",c=this.model;_.each(this.model.get("options"),function(a){b+='<option value="'+a.value+'">'+a.text+"</option>"}),this.$el.html('<select data-theme="'+c.get("theme")+'" class="c37-star-rating" id="'+c.get("id")+'"data-initial-rating="'+c.get("initialRating")+'"data-show-selected="'+c.get("showSelectedRating")+'"data-show-values="'+c.get("showValues")+'"name="'+c.get("name")+'"">'+b+"</select>"),a=c.get("id"),console.log("render with model")}else a="star-id-"+Math.floor(1e4*Math.random()),this.$el.html(this.template({id:a,theme:defaultValues.starsRatingOptions.theme,name:"star-"+Math.round(1e4*Math.random())}));this.renderRating(a)},renderRating:function(a){var b=this;jQuery(function(){a="#"+a,b.model&&(console.log("rendering with theme: "+b.model.get("theme")),defaultValues.starsRatingOptions.theme=b.model.get("theme"),defaultValues.starsRatingOptions.showValues=b.model.get("showValues"),defaultValues.starsRatingOptions.initialRating=b.model.get("initialRating"),defaultValues.starsRatingOptions.showSelectedRating=b.model.get("showSelectedRating")),setTimeout(function(){jQuery(a).barrating(defaultValues.starsRatingOptions)},0)})}}),Templates={checkbox:CheckBox,radio:Radio,textarea:TextArea,text:Text,date:DateInput,select:Select,label:Label,file:File,button:Button,acceptance:Acceptance,row:Row,heading:Heading,paragraph:Paragraph,step:Step,fieldset:FieldSet,recaptcha:ReCaptcha,image:Image,stars:Stars},ElementEditView=Backbone.View.extend({el:"#element-settings",originalEvents:{"change .validation input":"renderValidation","change .validation select":"renderValidation","change .element-action select":"renderAction","input .element-action input":"renderAction","input .css-styles input":"renderStyle","change .css-styles select":"renderStyle","blur [data-for=custom-css]":"renderStyle","blur [data-for=extra-classes]":"applyExtraClass","click #change-background-image":"changeImageBg","click #remove-background-image":"removeImageBg","click [data-for=background-color] .reset-color":"clearBgColor","blur [data-for=name]":"updateName"},additionalEvents:{},cleanValidation:function(){var a=Object.keys(validation);_.each(a,function(a){0==jQuery("[name="+a+"]").length&&delete validation[a]})},updateName:function(){var a=this.model.get("name");if("undefined"!=typeof a){var b=this.$el.find("[data-for=name]").first().val();"undefined"!=typeof validation[a]&&(validation[b]=validation[a],delete validation[a]),this.model.set({name:b})}},events:function(){return _.extend({},this.originalEvents,this.additionalEvents)},renderSizeObject:function(){var a={};a.size=this.$el.find("select[data-for=element-width]").val(),a.expand=!1,this.$el.find("input[data-for=expand]").is(":checked")&&(a.expand=!0),this.model.set({size:a})},renderValidation:function(){console.log("render in parent, change event");var a=this.$el.find(".validation").first(),b=jQuery(a).find("input[data-for=required]").first().is(":checked"),c=this.$el.find("[data-for=name]").val(),d=!1,e="",f=this.$el.find(".validation select[data-for=file-type]");f.length>0&&(d=f.first().val(),e="file"),validation[c]={required:b,fileType:d,inputType:e},this.cleanValidation(),this.renderGUMPValidation()},renderGUMPValidation:function(){console.log("rendering gump");var a=Object.keys(validation);core37Form.formSettings.GUMPString={},_.each(a,function(a){var b="",c=validation[a];"file"==c.inputType?(c.required&&(b+="required_file"),c.fileType.length>3&&(console.log("worth adding"),b+="|extension,"+c.fileType)):c.required&&(b+="required"),core37Form.formSettings.GUMPString[a]=b})},renderAction:function(){console.log("rendering element actions");var a=this,b=a.$el,c=a.model.get("editingElementID"),d=b.find(".element-action [data-for=trigger]").first(),e=b.find(".element-action [data-for=action]").first(),f=b.find('.element-action [data-for="trigger-value"]').first(),g=b.find(".element-action [data-for=target-url]").first(),h=b.find(".element-action [data-for=target-element]").first();if("undefined"!=typeof c){if("no-trigger"==d.val())return console.log("null-action"),delete elementsActions[c],e.hide(),f.parent().hide(),void g.hide();"click"==d.val()?(e.show(),f.parent().hide()):"change"==d.val()&&(e.show(),f.parent().show()),"open-link"!==e.val()?g.parent().hide():g.parent().show(),"show-element"==e.val()||"hide-element"==e.val()?h.parent().show():h.parent().hide();var i={},j=jQuery("#"+c);i["element-type"]=j.attr("data-c37-type"),i.trigger=d.val(),i.action=e.val(),"open-link"==e.val()?i.target=g.val():"show-element"!=e.val()&&"hide-element"!=e.val()||(i.target=h.val()),"change"==d.val()&&(i["trigger-value"]=f.val()),elementsActions[c]=i}},renderStyle:function(){var a=this.model.get("editingElementID");console.log("id is: "+a);var b=this.$el.find("[data-for=text-color] input").first().val(),c=this.$el.find("[data-for=background-color] input").first().val();"undefined"==typeof elementsStyles[a]&&(elementsStyles[a]={}),elementsStyles[a]["background-color"]=c,elementsStyles[a].color=b,this.applyStyle()},applyStyle:function(){var a="";for(var b in elementsStyles){var c=elementsStyles[b],d="";for(var e in c)d+=e+":"+c[e]+";";a+="#"+core37Form.formSettings.cssID+" #"+b+" .c37-child{"+d+"}"}0==jQuery("#element-styles").length&&jQuery("head").append('<style id="element-styles"></style>'),jQuery("#element-styles").text(""),jQuery("#element-styles").text(a)}}),TextEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("textEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"input .for-text [data-for=placeholder]":"updateModel","blur .for-text [data-for=icon]":"updateModel","input .for-text [data-for=input-label]":"updateModel","change .for-text select[data-for=input-type]":"updateModel","change .for-text select[data-for=element-width]":"updateModel","change .for-text input[data-for=expand]":"updateModel","change .for-text input[data-for=reply-to]":"updateModel","change .for-text input[data-for=email-subject]":"updateModel"},updateModel:function(){var a=this.$el.find("[data-for=placeholder]").first().val(),b=this.$el.find("[data-for=input-label]").first().val(),c=this.$el.find("select[data-for=input-type]").first().find(":selected").val(),d=this.$el.find("[data-for=name]").first().val(),e=this.$el.find("[data-for=icon]").first().val(),f=this.$el.find("[data-for=email-subject]").first().is(":checked"),g=this.$el.find("[data-for=reply-to]").first().is(":checked"),h=jQuery(".reply-to"),i=jQuery(".email-subject");"email"==c?(h.show(),h.removeClass("hidden"),g&&(core37Form.formSettings.replyToField=d)):h.hide(),"text"==c?(i.removeClass("hidden"),i.show(),f&&(core37Form.formSettings.subjectField=d)):i.hide(),this.renderSizeObject(),this.model.set({name:d,type:c,placeholder:a,label:b,icon:e})}}),CheckBoxEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("checkboxEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"click .for-checkbox .add-option":"addOption","input .for-checkbox .options input":"updateModel","change .for-checkbox .options input[type=checkbox]":"updateModel","change .for-checkbox select[data-for=alignment]":"updateModel","change .for-checkbox select[data-for=element-width]":"updateModel","change .for-checkbox input[data-for=expand]":"updateModel"},addOption:function(){this.$el.find(".options").append('<div><span class="c37-col-xs-8"><input data-for="value" type="text" placeholder="value" />  </span><span class="c37-col-xs-4 check"><input data-for="checked" type="checkbox" /> </span><span class="hidden"><input type="text" data-for="id" value="checkbox_id_'+Math.floor(1e4*Math.random())+'" /> </span></div>')},updateModel:function(){var a=this.$el.find("[data-for=name]").first().val(),b=this.$el.find("[data-for=alignment]").first().val(),c=[];this.$el.find(".options > div").each(function(){var a=jQuery(this).find("[data-for=value]").first(),b=jQuery(this).find("[data-for=checked]").first().is(":checked"),d=jQuery(this).find("[data-for=id]").first();if(console.log(a.val()),""!=a.val()){var e={value:encodeURIComponent(a.val()),checked:b,id:d.val()};c.push(e)}}),this.renderSizeObject(),this.model.set({name:a,options:c,alignment:b})}}),RadioEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("radioEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"click .for-radio .add-option":"addOption","input .for-radio .options input":"updateModel","change .for-radio .options input[type=radio]":"updateModel","change .for-radio select[data-for=alignment]":"updateModel","change .for-radio select[data-for=element-width]":"updateModel","change .for-radio input[data-for=expand]":"updateModel"},removeElement:removeElement,addOption:function(){this.$el.find(".options").append('<div><span class="c37-col-xs-8"><input data-for="value" type="text" placeholder="value" />  </span><span class="c37-col-xs-4 check"><input data-for="checked" type="radio" /> </span><span class="hidden"><input data-for="id" type="text" value="radio_id_'+Math.floor(1e4*Math.random())+'" /> </span></div>')},updateModel:function(){var a=this.$el.find("[data-for=name]").first().val(),b=this.$el.find("[data-for=alignment]").first().val(),c=[];this.$el.find(".options > div").each(function(){var a=jQuery(this).find("[data-for=value]").first(),b=jQuery(this).find("[data-for=checked]").first().is(":checked"),d=jQuery(this).find("[data-for=id]");if(""!=a.val()){var e={value:encodeURIComponent(a.val()),checked:b,id:d.val()};c.push(e)}}),this.renderSizeObject(),this.model.set({name:a,options:c,alignment:b})}}),LabelEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("labelEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"input .for-label [data-for=label]":"updateModel","change .for-label [data-for=required]":"updateModel","change .for-label select[data-for=element-width]":"updateModel","change .for-label input[data-for=expand]":"updateModel"},updateModel:function(){var a=this.$el.find("input[data-for=label]").first().val(),b=this.$el.find("input[data-for=required]").first().is(":checked");console.log(b),console.log("label update"),this.renderSizeObject(),this.model.set({content:a,required:b})}}),HeadingEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("headingEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"input .for-heading [data-for=heading]":"updateModel","change .for-heading [data-for=tagName]":"updateModel","change .for-heading select[data-for=element-width]":"updateModel","change .for-heading input[data-for=expand]":"updateModel"},updateModel:function(){var a=this.$el.find("input[data-for=heading]").first().val(),b=this.$el.find("[data-for=tagName]").val();console.log(b),this.model.set({content:a,tagName:b}),this.renderSizeObject()}}),ParagraphEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("paragraphEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"input .for-paragraph textarea[data-for=paragraph]":"updateModel","change .for-paragraph select[data-for=element-width]":"updateModel","change .for-paragraph input[data-for=expand]":"updateModel"},updateModel:function(){var a=this.$el.find("textarea[data-for=paragraph]").first().val();this.model.set({content:a}),this.renderSizeObject()}}),TextAreaEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("textAreaEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"change .for-textarea input[data-for=required]":"updateModel","change .for-textarea input[data-for=placeholder]":"updateModel","input .for-textarea [data-for=input-label]":"updateModel","change .for-textarea select[data-for=element-width]":"updateModel","change .for-textarea input[data-for=expand]":"updateModel"},updateModel:function(){var a=this.$el.find("input[data-for=placeholder]").first().val(),b=this.$el.find("input[data-for=name]").first().val(),c=this.$el.find("input[data-for=required]").first().is(":checked"),d=this.$el.find("[data-for=input-label]").first().val();this.model.set({name:b,required:c,placeholder:a,label:d}),this.renderSizeObject()}}),DateEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("dateEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"input .for-date [data-for=default-value]":"updateModel","change .for-date select[data-for=element-width]":"updateModel","change .for-date input[data-for=expand]":"updateModel","click .for-date .remove-element":"updateModel","change .for-date [data-for=date-type]":"updateModel"},updateModel:function(){
var a=(this.editingElement(),this.$el.find("[data-for=default-value]").first().val()),b=this.$el.find("select[data-for=date-type]").first().find(":selected").val(),c=this.$el.find("[data-for=name]").first().val();this.model.set({value:a,type:b,name:c}),this.renderSizeObject(),this.$el.find("[data-for=default-value]").attr("type",b)}}),ButtonEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("buttonEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"input .for-button input[data-for=text]":"updateModel","input .for-button input[data-for=url]":"updateModel","change .for-button select[data-for=element-width]":"updateModel","change .for-button input[data-for=expand]":"updateModel"},updateModel:function(){var a=this.$el.find("input[data-for=text]").first().val(),b=this.$el.find("input[data-for=name]").first().val();this.model.set({name:b,text:a}),this.renderSizeObject()}}),SelectEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("selectEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"input .for-select .options input":"updateModel","input .for-select [data-for=value]":"updateModel","input .for-select [data-for=selected]":"updateSelected","change .for-select select[data-for=element-width]":"updateModel","change .for-select input[data-for=expand]":"updateModel"},updateSelected:function(){var a=this.$el.find("[data-for=selected]").val();this.model.set({selected_value:a})},updateModel:function(){var a=this.$el.find("[data-for=name]").first().val(),b=this.$el.find("[data-for=value]").first().val().split("\n"),c=this.model.get("selected_value"),d="";_.each(b,function(a){var b=a==c?"selected":"";d+="<option "+b+'  value="'+encodeURIComponent(a)+'">'+a+"</option>"}),this.$el.find("[data-for=selected]").first().html(d);var e=[];_.each(b,function(a){var b={value:encodeURIComponent(a)};e.push(b)}),this.model.set({name:a,options:e}),this.renderSizeObject()}}),AcceptanceEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("acceptanceEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"input .for-acceptance [data-for=text]":"updateModel","input .for-acceptance [data-for=error]":"updateModel","change .for-acceptance input[data-for=expand]":"updateModel","change .for-acceptance select[data-for=element-width]":"updateModel"},updateModel:function(){var a=this.$el.find("input[data-for=text]").first().val(),b=this.$el.find("[data-for=name]").first().val(),c=this.$el.find("[data-for=error]").first().val();this.model.set({name:b,text:a,error_message:c}),this.renderSizeObject()}}),FileEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},template:_.template(getEditForm("fileEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"change .for-file input[data-for=multiple]":"updateModel","blur .for-file [data-for=icon]":"updateModel","blur .for-file [data-for=file-type]":"updateModel","input .for-file [data-for=text]":"updateModel"},updateModel:function(){var a=this.$el.find("[data-for=name]").first().val(),b=this.$el.find("[data-for=multiple]").is(":checked"),c=this.$el.find("[data-for=text]").first().val(),d=this.$el.find("[data-for=icon]").first().val(),e={type:this.$el.find("[data-for=file-type]").first().find(":selected").val(),details:""};this.model.set({name:a,multiple:b,file_type:e,text:c,icon:d}),this.renderSizeObject(),this.renderValidation()}}),ImageEdit=ElementEditView.extend({el:"#element-settings",frame:null,initialize:function(){this.render()},template:_.template(getEditForm("imageEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"click .for-image #c37-image-picker":"openImageSelector"},updateModel:function(){},openImageSelector:function(){if(!versionNangCap)return void toastr.info(UPGRADE_TO_USE_IMAGE);if(console.log("image"),this.frame)return void this.frame.open();var a=this.$el,b=this.frame,c=this.model;b=wp.media({title:"select an image",button:{text:"Use this image"},multiple:!1}),b.on("select",function(){var d=b.state().get("selection").first().toJSON();console.log(d.url),a.find(".c37-image-preview").first().attr("src",d.url),c.set({imgSrc:d.url})}),b.open()}}),StarsEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render(),console.log(this.model.get("theme")),console.log(this.model.get("id"))},template:_.template(getEditForm("starsEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"change .for-stars [data-for=theme]":"updateModel","input .for-stars [data-for=options]":"updateModel","change .for-stars [data-for=initial-rating]":"updateInitialValue","change .for-stars [data-for=show-labels]":"updateModel","change .for-stars [data-for=show-selected]":"updateModel"},updateInitialValue:function(){return versionNangCap?void this.model.set({initialRating:this.$el.find("[data-for=initial-rating]").first().val()}):void toastr.info(UPGRADE_TO_USE_RATING)},updateModel:function(){if(!versionNangCap)return void toastr.info(UPGRADE_TO_USE_RATING);var a=this.model,b=this.$el.find("[data-for=theme]").first().val(),c=this.$el.find("[data-for=name]").first().val(),d=this.$el.find("[data-for=show-labels]").first().is(":checked"),e=this.$el.find("[data-for=show-selected]").first().is(":checked"),f=[],g=jQuery.trim(this.$el.find("[data-for=options]").first().val());_.each(g.split("\n"),function(a){f.push({value:a,text:a})});var h="";_.each(f,function(b){var c=b.value==a.get("initialRating")?"selected":"";h+="<option "+c+' value="'+b.value+'"  >'+b.text+"</option>"}),this.$el.find("select[data-for=initial-rating]").first().html(h);var i=this.$el.find("[data-for=initial-rating]").first().val();this.model.set({showValues:d,options:f,theme:b,initialRating:i,showSelectedRating:e,name:c})}}),RowEdit=ElementEditView.extend({el:"#row-settings",initialize:function(){this.render()},editingRow:function(){return jQuery("#"+this.model.get("rowID"))},template:_.template(getEditForm("rowEdit")),reset:function(){this.$el.html(""),this.unbind(),this.model.unbind()},render:function(){this.$el.html(this.template({layout:this.model.get("layout")}))},additionalEvents:{"change .for-row select[data-for=layout]":"renderRow","click .for-row .remove-element":"removeRow"},removeRow:function(){var a=this.editingRow().parent(".c37-step");a.find(".c37-row").length>1?this.editingRow().remove():(this.editingRow().find("*").remove(),this.editingRow().append('<div class="c37-box c37-col-md-12"></div>'),makeC37BoxDroppable(jQuery))},renderRow:function(){function a(a){var b=a.attr("class").split(/\s+/),c="";return _.each(b,function(a){a.indexOf("c37-col-md-")!=-1&&(c=a)}),c}function b(a){var b=[],c=a.find(".c37-box");return _.each(c,function(a){0==jQuery(a).find(".c37-item-element").length&&b.push(a)}),b}function c(b,c){b.find(".c37-box").each(function(b){console.log(a(jQuery(this))),console.log("Index: ",c[b]),jQuery(this).removeClass(a(jQuery(this))).addClass("c37-col-md-"+c[b])})}console.log("calling render row");var d=this.editingRow(),e=d.attr("data-c37-layout"),f=this.$el.find("select[data-for=layout]").first().val();if(e!=f){var g=e.split("-"),h=f.split("-");if(g.length==h.length)c(d,h);else if(g.length>h.length){var i=g.length-h.length,j=b(d);if(i>j.length)return void alert("You do not have enough blank box"+i+"---"+j.length);for(var k=i;k>0;k--)jQuery(j[j.length-k]).remove();console.log(h),c(d,h)}else if(g.length<h.length){var l=h.length-g.length;console.log("column to add: "+l);for(var k=0;k<l;k++)d.append('<div class="c37-box"></div>');c(d,h),makeC37BoxDroppable(jQuery)}d.attr("data-c37-layout",f)}}}),FormEdit=ElementEditView.extend({el:"#form-settings",initialize:function(){this.render()},template:_.template(getEditForm("formEdit")),render:function(){this.$el.html(this.template({}))},additionalEvents:{"change .for-form input":"renderForm","input .for-form input":"renderForm","change .for-form select[data-for=form-style]":"updateStyle"},updateStyle:function(){for(var a=jQuery("#construction-site > form"),b=this.$el.find("[data-for=form-style]").first().val(),c=!1,d=0;d<core37Form.styles.length;d++)if(core37Form.styles[d].class==b){c=core37Form.styles[d].is_pro;break}c&&!versionNangCap?toastr.info(UPGRADE_TO_UNLOCK_TEMPLATE):core37Form.formSettings.presetCSSStyle=b,core37Form.formSettings.presetCSSStyle=b,_.each(core37Form.styles,function(b){a.removeClass(b.class)}),a.addClass(b)},renderForm:function(){var a=this.$el.find("[data-for=width]").first().val(),b=(this.$el.find("[data-for=bgColor]").first().val(),this.$el.find("[data-for=afterSubmitURL]").first().val()),c=this.$el.find("[data-for=sendNotification]").is(":checked"),d=this.$el.find("[data-for=sendAutoReply]").is(":checked"),e=this.$el.find("[data-for=afterSubmitMessage]").val();core37Form.formSettings.afterSubmitURL=b,core37Form.formSettings.sendNotification=c,core37Form.formSettings.sendAutoReply=d,core37Form.formSettings.afterSubmitMessage=e,core37Form.formName=this.$el.find("[data-for=name]").first().val(),core37Form.formSettings.width=a;var f=jQuery("#construction-site > form");""!=a?f.css("width",a):(f.css("width",""),f.attr("data-c37-full-width",""))}}),FormsList=Backbone.View.extend({default:{forms:{}},el:"#forms-list",initialize:function(){console.log("loading forms"),this.render()},template:_.template('<h4><i class="fa fa-close close-panel"></i> All forms</h4><ul><% _.each(forms, function(form) { %><li class="form-edit" form-id="<%= form.id %>"> <i class="fa fa-pencil"></i>  <i class="fa fa-code"></i> <i class="fa fa-trash"></i> <%= form.title %></li><% }) %></ul>'),render:function(){this.$el.html(this.template({forms:this.model.get("forms")}))}});!function(a){a(function(){versionNangCap&&a("#c37-go-pro").hide(),makeFromDroppable(a),makeC37BoxDroppable(a),makeC37StepDroppable(a),a("#construction-site form").attr("id",core37Form.formSettings.cssID),a(document).on("click",".c37-step .c37-item-element",function(a){a.preventDefault()}),a("#elements-panel").accordion(),a(".c37-container-element").draggable({connectToSortable:".c37-step",helper:"clone",revert:"invalid",addClasses:!1}),a(".c37-form-multi-element").draggable({connectToSortable:".c37-step-container",helper:"clone",revert:"invalid",addClasses:!1}),a(".c37-item-element").draggable({connectToSortable:".c37-box",helper:"clone",revert:"invalid",iframeFix:!0,addClasses:!1,refreshPositions:!0,stop:function(){localStorage.setItem("dragging-stop",!0)},start:function(){localStorage.setItem("dragging-stop",!1)}})})}(jQuery),function(a){function b(b){var c,d=a("#"+b),e=d.attr("data-c37-type"),i=f(d);"undefined"!=typeof h&&h.remove();var j={};"undefined"!=typeof elementsActions[b]&&(j=elementsActions[b]);var k=[];if(_.each(a("#construction-site .c37-item-element"),function(c){var d=a(c).attr("id");d!=b&&k.push({id:a(c).attr("id"),name:a(c).find("[name]").first().attr("name")})}),g=new C37ElementModel({action:j,allElements:k}),"undefined"!=typeof validation[b]?g.set({vali:validation[b].rules}):g.set({vali:{}}),"text"==e){var l=!1;d.find(".c37-suggest-icon").length>0&&(console.log("found"),l=d.find(".c37-suggest-icon").first().attr("class").split(" ")[1],console.log(l)),g.set({placeholder:d.find("input").first().attr("placeholder"),editingElementID:b,type:d.find("input").first().attr("type"),name:d.find("input").first().attr("name"),size:i,label:d.find("label").first().html(),cssID:d.find("input").first().attr("id"),icon:l}),c=new Text({model:g,el:"#"+b}),c.render(),g.on("change",function(){c.render()}),h=new TextEdit({model:g}),renderFontAwesome("fa-icon-input")}else if("checkbox"==e){var m=[];d.find(".c37-single-checkbox").each(function(){var b={value:a(this).find("input").first().attr("value"),checked:a(this).find("input").first().prop("checked"),id:a(this).find("input").first().attr("id")};m.push(b)}),g.set({options:m,name:d.find("input").first().attr("name").replace("[","").replace("]",""),editingElementID:b,size:i,alignment:d.hasClass("c37-vertical")?"c37-vertical":"c37-horizontal"}),c=new CheckBox({model:g,el:"#"+b}),c.render(),g.on("change",function(){c.render()}),h=new CheckBoxEdit({model:g})}else if("radio"==e){var m=[];d.find(".c37-single-radio").each(function(){var b={value:a(this).find("input").first().attr("value"),checked:a(this).find("input").first().prop("checked"),id:a(this).find("input").first().attr("id")};m.push(b)}),g.set({options:m,name:d.find("input").first().attr("name"),size:i,alignment:d.hasClass("c37-vertical")?"c37-vertical":"c37-horizontal"}),c=new Radio({model:g,el:"#"+b}),c.render(),g.on("change",function(){c.render()}),h=new RadioEdit({model:g})}else if("label"==e)g.set({content:d.find("label").first().html().replace('<sup class="required">*</sup>',"")}),g.set({required:d.find("sup").length>0}),g.set({editingElementID:b}),g.set({size:i}),c=new Label({model:g,el:"#"+b}),h=new LabelEdit({model:g});else if("heading"==e)g.set({content:d.find(":header").first().html()}),g.set({tagName:d.find(":header").first().prop("tagName").toLowerCase()}),g.set({editingElementID:b}),g.set({size:i}),c=new Heading({model:g,el:"#"+b}),h=new HeadingEdit({model:g});else if("paragraph"==e)g.set({content:d.find("p").first().html()}),g.set({editingElementID:b}),g.set({size:i}),c=new Paragraph({model:g,el:"#"+b}),h=new ParagraphEdit({model:g});else if("date"==e)g.set({value:d.find("input").first().attr("value")}),g.set({editingElementID:b}),g.set({type:d.find("input").first().attr("type")}),g.set({name:d.find("input").first().attr("name")}),g.set({size:i}),c=new DateInput({model:g,el:"#"+b}),h=new DateEdit({model:g});else if("textarea"==e)g.set({editingElementID:b,name:d.find("textarea").first().attr("name"),placeholder:d.find("textarea").first().attr("placeholder"),label:d.find("label").first().html(),cssID:d.find("textarea").first().attr("id"),size:i}),c=new TextArea({model:g,el:"#"+b}),h=new TextAreaEdit({model:g});else if("button"==e){var n=d.find("button").first();g.set({text:n.html()}),g.set({name:n.attr("name")}),g.set({editingElementID:b}),g.set({size:i}),c=new Button({model:g,el:"#"+b}),h=new ButtonEdit({model:g})}else if("select"==e){var m=[];d.find("option").each(function(){var b={value:a(this).attr("value")};m.push(b)}),g.set({options:m,name:d.find("select").first().attr("name"),editingElementID:b,size:i,selected_value:d.find("select").first().val()}),c=new Select({model:g,el:"#"+b}),h=new SelectEdit({model:g})}else if("acceptance"==e)g.set({error_message:d.find("input").first().attr("data-error"),name:d.find("input").first().attr("name"),text:d.find("span").first().html(),editingElementID:b,id:d.find("input").first().attr("id"),size:i}),c=new Acceptance({model:g,el:"#"+b}),h=new AcceptanceEdit({model:g});else if("file"==e)g.set({name:d.find("input").first().attr("name").replace("[","").replace("]",""),multiple:d.find("input").first().prop("multiple"),field_id:d.find("input").first().attr("id"),editingElementID:b,text:d.find(".c37-file-label").first().text(),icon:d.find("i").attr("class"),file_type:d.find("input").first().attr("accept")}),c=new File({model:g,el:"#"+b}),h=new FileEdit({model:g}),renderFontAwesome("fa-icon-input");else if("image"==e)g.set({imgSrc:d.find("img").first().attr("src")}),c=new Image({model:g,el:"#"+b}),h=new ImageEdit({model:g});else if("stars"==e){var o=d.find("select").first(),p=o.attr("data-theme"),q=o.attr("id"),m=[],r=o.attr("data-initial-rating"),s="true"==o.attr("data-show-values"),t="true"==o.attr("data-show-selected"),u=o.attr("name");_.each(o.find("option"),function(b){m.push({value:a(b).val(),text:a(b).html()})}),g.set({theme:p,id:q,options:m,initialRating:r,showValues:s,showSelectedRating:t,name:u}),c=new Stars({model:g,el:"#"+b}),h=new StarsEdit({model:g})}c.render(),g.on("change",function(){c.render()}),a("#setting-tabs").tabs({active:0}),a(document).on("click","#setting-tabs ul li a",function(){a("#setting-tabs ul li a").removeClass("active-tab"),a(this).addClass("active-tab")})}function c(b){swal({title:"Delete this element?",text:"This action cannot be undone. Be very careful",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0},function(c){if(c){var d=a("#"+b);"undefined"!=typeof validation[b]&&delete validation[b],d.remove(),console.log("deleted")}})}function d(){k=new FormEdit({model:new C37ElementModel(core37Form.formSettings)}),a("#setting-tabs").tabs({active:0}),a(document).on("click","#setting-tabs ul li a",function(){a("#setting-tabs ul li a").removeClass("active-tab"),a(this).addClass("active-tab")})}function e(b,c){"undefined"!=typeof i&&i.clear(),i=new C37ElementModel({rowID:b,layout:c}),"undefined"!=typeof j&&j.remove(),j=new RowEdit({model:i}),a("#setting-tabs").tabs({active:0}),a(document).on("click","#setting-tabs ul li a",function(){a("#setting-tabs ul li a").removeClass("active-tab"),a(this).addClass("active-tab")})}function f(a){var b=a.hasClass("c37-col-xs-12"),c=a.attr("class"),d=12;if(c.indexOf("c37-col-md-")!=-1){var e=c.split("c37-col-md-");d=e[1].split(" ")[0]}return{expand:b,size:d}}var g,h,i,j,k,l=(a("#options-window"),'<div class="c37-element-cm"><span class="cm-move"><i class="fa fa-arrows"></i></span><span class="cm-edit"><i class="fa fa-pencil"></i></span><span class="cm-del"><i class="fa fa-trash"></i></span></div>'),m='<div class="c37-row-cm"><span class="cm-row-move"><i class="fa fa-arrows"></i></span><span class="cm-row-edit"><i class="fa fa-pencil"></i></span><span class="cm-box-edit"><i class="fa fa-square"></i></span><span class="cm-row-del"><i class="fa fa-trash"></i></span></div>';a(document).on("click",".close-panel",function(){hideOptionsWindow(a)}),a(document).on("mouseover",".c37-step .c37-item-element",function(){0==a(this).find(".c37-element-cm").length&&a(this).append(l)}),a(document).on("mouseleave",".c37-step .c37-item-element",function(){a(this).find(".c37-element-cm").remove()}),a(document).on("mouseover",".c37-step .c37-box",function(){0==a(this).find(".c37-row-cm").length&&a(this).append(m)}),a(document).on("mouseleave",".c37-step .c37-box",function(){a(this).find(".c37-row-cm").remove()}),a(document).on("click",".cm-del",function(){var b=a(this).closest(".c37-item-element");console.log("about to delete"),swal({title:"Delete this element?",text:"This action cannot be undone. Be very careful",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0},function(a){if(a){var c=b.attr("id");console.log(c),"undefined"!=typeof validation[c]&&delete validation[c],b.remove(),console.log("deleted")}})}),a(document).on("click",".c37-element-cm .cm-edit",function(){console.log("loading edit form...");var c=a("#options-window");c.html(""),c.append('<div id="element-settings"></div>');var d=a(this).closest(".c37-item-element").attr("id");b(d),c.hide(),showOptionsWindow(a),c.draggable({handle:"#move-panel"})}),a(document).on("click",".c37-element-cm .cm-del",function(){var b=a(this).closest(".c37-item-element").attr("id");c(b)}),a(document).on("click",".c37-row-cm .cm-row-edit",function(b){a("#options-window").html(""),a("#options-window").append('<div id="row-settings"></div>');var c=a(this).closest(".c37-row").attr("id"),d=a(this).closest(".c37-row").attr("data-c37-layout");e(c,d),hideOptionsWindow(a),showOptionsWindow(a),a("#options-window").draggable({handle:"#move-panel"})}),a(document).on("click",".c37-row-cm .cm-row-del",function(){var b=a(this).closest(".c37-row").attr("id");c(b)}),a(document).on("click","#open-form-settings",function(){a("#options-window").html(""),a("#options-window").append('<div id="form-settings"></div>'),d(),hideOptionsWindow(a),showOptionsWindow(a)})}(jQuery),function(a){a(document).on("click","#save-form",function(){if(console.log(core37Form),""==a.trim(core37Form.formName))return void toastr.error(ERROR_MISSING_FORM_NAME);var b="",c=a("#construction-site .c37-step");_.each(c,function(a){b+=encodeURIComponent(a.outerHTML)}),a.post(ajaxurl,{formContent:b,elementsActions:JSON.stringify(elementsActions),formID:core37Form.formID,formSettings:JSON.stringify(core37Form.formSettings),formName:core37Form.formName,action:"core37_save_form",formValidation:JSON.stringify(validation),formCSSCode:encodeURIComponent(a("#element-styles").text()),formCSSObject:JSON.stringify(elementsStyles)},function(a){core37Form.formID=parseInt(a),toastr.success(SUCCESS_FORM_SAVED)})}),a(document).on("click","#get-forms",function(b){a.post(ajaxurl,{action:"core37_list_forms"},function(b){var c=a("#options-window");c.html(""),c.append('<div id="forms-list"></div>');var d=new C37ElementModel({});d.set("forms",JSON.parse(b)),new FormsList({model:d}),c.show()})}),a(document).on("click",".form-edit i.fa-pencil",function(){var b=a(this).closest("li").attr("form-id");a.post(ajaxurl,{action:"core37_load_form",formID:b},function(c){var d=JSON.parse(c);elementsActions=JSON.parse(d.elementsActions),core37Form.formSettings=JSON.parse(d.formSettings),validation=JSON.parse(d.formValidation),elementsStyles=JSON.parse(d.formCSSObject),a("#element-styles").remove(),a("head").append('<style id="element-styles"></style>'),a("#element-styles").text(decodeURIComponent(d.formCSSCode));var e='<form class="c37-form c37-container '+core37Form.formSettings.presetCSSStyle+' " method="'+core37Form.formSettings.method+'" action="'+core37Form.formSettings.action+'" enctype="application/x-www-form-urlencoded" id="'+core37Form.formSettings.cssID+'" style="width: '+core37Form.formSettings.width+'px;">'+decodeURIComponent(d.formData.post_content)+"</form>";a("#construction-site").html(e),core37Form.formName=d.formData.post_title,core37Form.formID=b,makeFromDroppable(a),makeC37BoxDroppable(a),makeC37StepDroppable(a),restoreStarsRating(a),hideOptionsWindow(a)})}),a(document).on("click",".form-edit i.fa-trash",function(){var b=a(this).closest("li").attr("form-id"),c=a(this);swal({title:"Are you sure?",text:"You will not be able to recover this form!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1,html:!1},function(){a.post(ajaxurl,{action:"core37_delete_form",formID:b},function(){c.closest(".form-edit").hide("slide",{direction:"up"},200)}),swal("Deleted!","Your form has been deleted.","success")})}),a(document).on("click",".form-edit i.fa-code",function(){var b=a(this).closest("li").attr("form-id");swal("Here is your shortcode","[core37_form id="+b+"]","success")})}(jQuery),function(){jQuery(function(){jQuery(".c37-form input[type=file]").on("change",function(){for(var a="",b=0;b<jQuery(this).get(0).files.length;++b)a+='<span class="c37-selected-file">'+jQuery(this).get(0).files[b].name+"</span>";a="<div class='all-selected-files'>"+a+"</div>",jQuery(".all-selected-files").remove(),console.log("item: "+jQuery(this).closest(".c37-child").length),jQuery(this).is(":visible")||(console.log("appending-file"),jQuery(this).closest("div.c37-child").append(a))}),_.each(jQuery(".c37-star-rating"),function(a){var b=jQuery(a);b.siblings(".br-widget").remove(),console.log(b.find(".br-wrapper").length),console.log("star rendered");var c=b.attr("data-theme"),d="true"==b.attr("data-show-selected"),e="true"==b.attr("data-show-values"),f=b.attr("data-initial-rating"),g=b.attr("id"),h={theme:c,showSelectedRating:d,showValues:e,initialRating:f,allowEmpty:!0,onSelect:function(a,c){console.log("value is : "+a),_.each(b.find("option"),function(b){var c=jQuery(b);c.val()==a&&c.prop("selected",!0)})}};console.log(h),jQuery("#"+g).barrating(h)})})}(jQuery);